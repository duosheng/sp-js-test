{"version":3,"sources":["jd-android-error.js"],"names":["_spiderVersion","_su","$","dQuery","jQuery","String","prototype","format","args","Array","slice","call","arguments","count","replace","trim","empty","_logstr","str","JSON","stringify","toString","log","s","window","curSession","console","errorReport","e","stack","msg","message","finish","endWith","substring","length","qs","location","search","substr","a","split","b","temp","MutationObserver","WebKitMutationObserver","safeCallback","f","Function","apply","hook","fun","t","name","eval","setTimeout","setInterval","DomNotFindReport","selector","waitDomAvailable","success","fail","timeout","ob","clearInterval","Observe","options","callback","mo","observe","apiInit","noConflict","withCheck","attr","DataSession","finished","_xy","bridge","xyApiLoaded","dSpider","sessionKey","timeOut","onSpiderInited","session","onclose","href","_save","onNavigate","on","_init","startTime","get","now","Date","getTime","set","passed","left","getExtraData","extras","_","v","config","_config","_args","bind","key","start","parse","data","save","local","read","value","showProgress","isShow","undefined","setProgressMax","max","setProgress","progress","getProgress","showLoading","hideLoading","errmsg","content","code","url","upload","Object","push","load","headers","alert","setStartUrl","setUserAgent","openWithSpecifiedCore","core","autoLoadImg","string","setProgressMsg","type","setLocal","k","getLocal","env","re","infokey","sid","max_order_num","max_order_date","globalInfo","jderror","indexOf","children","info","base_info","username","text","saveInfo","global_contact_info","contact_info","taskAddr","urlarray","i","response","status","node","append","find","phone","addr","innerHTML","detail","contact_detail","contact","when","done","getOrder","orders","order_info","order_detail","getPageOrder","page","getJSON","d","orderList","orderId","concat","task","tempOrder","each","ajax","passKeyList","async","orderitem","order","dataSubmit","price","products","num","product","time","sort","compare","getUserInfo","value1","value2","click","idcard_no","logout","addrdetail","address","site_id","zipcode","id","total","number"],"mappings":"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","file":"../jd-android-error.js","sourcesContent":["!function(){\n    var _spiderVersion=\"0.0.0.145\";\n    var _su=\"https://plogin.m.jd.com/user/login.action?appid=100\";\n    /**\n     * Created by du on 16/9/1.\n     */\n    var $ = dQuery;\n    var jQuery=$;\n    String.prototype.format = function () {\n        var args = Array.prototype.slice.call(arguments);\n        var count = 0;\n        return this.replace(/%s/g, function () {\n            return args[count++];\n        });\n    };\n\n    String.prototype.trim = function () {\n        return this.replace(/(^\\s*)|(\\s*$)/g, '');\n    };\n\n    String.prototype.empty = function () {\n        return this.trim() === \"\";\n    };\n\n    function _logstr(str){\n        str=str||\" \"\n        return typeof str==\"object\"?JSON.stringify(str):(new String(str)).toString()\n    }\n    function log(str) {\n        var s= window.curSession\n        if(s){\n            s.log(str)\n        }else {\n            console.log(\"dSpider: \"+_logstr(str))\n        }\n    }\n\n//异常捕获\n    function errorReport(e) {\n        var stack=e.stack? e.stack.replace(/http.*?inject\\.php.*?:/ig,\" \"+_su+\":\"): e.toString();\n        var msg=\"语法错误: \" + e.message +\"\\nscript_url:\"+_su+\"\\n\"+stack\n        if(window.curSession){\n            curSession.log(msg);\n            curSession.finish(e.message,\"\",3,msg);\n        }\n    }\n\n    String.prototype.endWith = function (str) {\n        if (!str) return false;\n        return this.substring(this.length - str.length) === str;\n    };\n\n//queryString helper\n    window.qs = [];\n    var s = location.search.substr(1);\n    var a = s.split('&');\n    for (var b = 0; b < a.length; ++b) {\n        var temp = a[b].split('=');\n        qs[temp[0]] = temp[1] ? temp[1] : null;\n    }\n    MutationObserver = window.MutationObserver || window.WebKitMutationObserver\n\n    function safeCallback(f) {\n        if (!(f instanceof Function)) return f;\n        return function () {\n            try {\n                f.apply(this, arguments)\n            } catch (e) {\n                errorReport(e)\n            }\n        }\n    }\n//设置dQuery异常处理器\n    dQuery.safeCallback = safeCallback;\n    dQuery.errorReport = errorReport;\n\n    function hook(fun) {\n        return function () {\n            if (!(arguments[0] instanceof Function)) {\n                t = arguments[0];\n                log(\"warning: \" + fun.name + \" first argument should be function not string \")\n                arguments[0] = function () {\n                    eval(t)\n                };\n            }\n            arguments[0] = safeCallback(arguments[0]);\n            return fun.apply(this, arguments)\n        }\n    }\n\n//hook setTimeout,setInterval异步回调\n    var setTimeout = hook(window.setTimeout);\n    var setInterval = hook(window.setInterval);\n\n//dom 监控\n    function DomNotFindReport(selector) {\n        var msg = \"元素不存在[%s]\".format(selector)\n        log(msg)\n    }\n\n    function waitDomAvailable(selector, success, fail) {\n        var timeout = 10000;\n        var t = setInterval(function () {\n            timeout -= 10;\n            var ob = dQuery(selector)\n            if (ob[0]) {\n                clearInterval(t)\n                success(ob, 10000 - timeout)\n            } else if (timeout === 0) {\n                clearInterval(t)\n                var f = fail || DomNotFindReport;\n                f(selector)\n            }\n        }, 10);\n    }\n\n    function Observe(ob, options, callback) {\n        var mo = new MutationObserver(callback);\n        mo.observe(ob, options);\n        return mo;\n    }\n\n//dquery,api加载成功的标志是window.xyApiLoaded=true,所有操作都必须在初始化成功之后\n    function apiInit() {\n        dQuery.noConflict();\n        var withCheck=function(attr) {\n            var f = DataSession.prototype[attr];\n            return function () {\n                if (this.finished) {\n                    console.log(\"dSpider: call \" + attr + \" ignored, since finish has been called! \")\n                } else {\n                    return f.apply(this, arguments);\n                }\n            }\n        }\n\n        for (var attr in DataSession.prototype) {\n            DataSession.prototype[attr] = withCheck(attr);\n        }\n        var t = setInterval(function () {\n            if (!(window._xy || window.bridge)) {\n                return;\n            }\n            window.xyApiLoaded = true;\n            clearInterval(t);\n        }, 20);\n    }\n\n//爬取入口\n    function dSpider(sessionKey,timeOut, callback) {\n        if(window.onSpiderInited&&this!=5)\n            return;\n        var $=dQuery;\n        var t = setInterval(function () {\n            if (window.xyApiLoaded) {\n                clearInterval(t);\n            } else {\n                return;\n            }\n            var session = new DataSession(sessionKey);\n            var onclose=function(){\n                log(\"onNavigate:\"+location.href)\n                session._save()\n                if(session.onNavigate){\n                    session.onNavigate(location.href);\n                }\n            }\n            $(window).on(\"beforeunload\",onclose)\n            window.curSession = session;\n            session._init(function(){\n                //超时处理\n                if (!callback) {\n                    callback = timeOut;\n                    timeOut = -1;\n                }\n                if (timeOut != -1) {\n                    var startTime = session.get(\"startTime\")\n                    var now = new Date().getTime();\n                    if (!startTime) {\n                        session.set(\"startTime\", now);\n                        startTime=now\n                    }\n                    timeOut *= 1000;\n                    var passed = (now - startTime);\n                    var left = timeOut -passed;\n                    left = left > 0 ? left : 0;\n                    log(\"left:\"+left)\n                    setTimeout(function () {\n                        log(\"time out\");\n                        if (!session.finished) {\n                            session.finish(\"timeout [\"+timeOut/1000+\"s] \", \"\",4)\n                        }\n                    }, left);\n                }\n                DataSession.getExtraData(function (extras) {\n                    $(safeCallback(function(){\n                        $(\"body\").on(\"click\",\"a\",function(){\n                            $(this).attr(\"target\",function(_,v){\n                                if(v==\"_blank\") return \"_self\"\n                            })\n                        })\n                        log(\"dSpider start!\")\n                        extras.config=typeof _config===\"object\"?_config:\"{}\";\n                        session._args=extras.args;\n                        callback(session, extras, $);\n                    }))\n                })\n            })\n        }, 20);\n    }\n\n    dQuery(function(){\n        if(window.onSpiderInited){\n            window.onSpiderInited(dSpider.bind(5));\n        }\n    })\n\n    function DataSession(key) {\n        this.key = key;\n        this.finished = false;\n        _xy.start(key);\n    }\n\n    DataSession.getExtraData = function (f) {\n        f = safeCallback(f);\n\n        f && f(JSON.parse(_xy.getExtraData() || \"{}\"));\n    }\n\n    DataSession.prototype = {\n        _save: function () {\n            _xy.set(this.key, JSON.stringify(this.data));\n            _xy.save(this.key,JSON.stringify(this.local))\n        },\n        _init: function (f) {\n            this.data = JSON.parse(_xy.get(this.key) || \"{}\");\n            this.local=JSON.parse(_xy.read(this.key)|| \"{}\")\n            f()\n        },\n\n        get: function (key) {\n            return this.data[key];\n        },\n        set: function (key, value) {\n            this.data[key] = value;\n        },\n\n        showProgress: function (isShow) {\n            _xy.showProgress(isShow === undefined ? true : !!isShow);\n        },\n        setProgressMax: function (max) {\n            _xy.setProgressMax(max);\n        },\n        setProgress: function (progress) {\n            _xy.setProgress(progress);\n        },\n        getProgress: function (f) {\n            f = safeCallback(f);\n            f && f(_xy.getProgress());\n        },\n        showLoading: function (s) {\n            _xy.showLoading(s || \"正在爬取,请耐心等待...\")\n        },\n        hideLoading: function () {\n            _xy.hideLoading()\n        },\n        finish: function (errmsg, content, code, stack) {\n            this.finished = true;\n            if (errmsg) {\n                var ob = {\n                    url: location.href,\n                    msg: errmsg,\n                    //content: content || document.documentElement.outerHTML,\n                    args: this._args\n                }\n                stack && (ob.stack = stack);\n                return _xy.finish(this.key || \"\", code || 2, JSON.stringify(ob));\n            }\n            return _xy.finish(this.key || \"\", 0, \"\")\n        },\n        upload: function (value) {\n            if (value instanceof Object) {\n                value = JSON.stringify(value);\n            }\n            return _xy.push(this.key, value)\n        },\n        load: function (url, headers) {\n            headers = headers || {}\n            if (typeof headers !== \"object\") {\n                alert(\"the second argument of function load  must be Object!\")\n                return\n            }\n            _xy.load(url, JSON.stringify(headers));\n        },\n        setStartUrl:function(){\n            this.set('__loginUrl',location.href);\n        },\n        setUserAgent: function (str) {\n            _xy.setUserAgent(str)\n        },\n        openWithSpecifiedCore: function (url, core) {\n            _xy.openWithSpecifiedCore(url, core)\n        },\n        autoLoadImg: function (load) {\n            _xy.autoLoadImg(load === true)\n        },\n        string: function () {\n            log(this.data)\n        },\n        setProgressMsg:function(str){\n            if(!str) return;\n            _xy.setProgressMsg(str);\n        },\n        log: function(str,type) {\n            str=_logstr(str);\n            console.log(\"dSpider: \"+str)\n            _xy.log(str,type||1)\n        },\n        setLocal: function (k, v) {\n            this.local[k]=v\n        },\n        getLocal: function (k) {\n            return this.local[k];\n        }\n    };\n    apiInit();;\n\n    dSpider(\"jd\", function(session,env,$){\n\n        var re = /sid=(.+)$/ig;\n        var infokey = \"infokey\";\n        var sid = \"\";\n        var max_order_num = 30;\n        var max_order_date = 1000;\n        var globalInfo;\n\n        jderror\n\n        sid = session.get(\"sid\");\n\n        if (location.href.indexOf(\"://m.jd.com\") !== -1 ) {\n            session.showProgress(true);\n            session.setProgressMax(100);\n            session.autoLoadImg(false);\n            session.setProgress(5);\n\n            if($(\".jd-search-form-input\")[0] !== undefined){\n                sid  = $(\".jd-search-form-input\")[0].children[0].value;\n                session.set(\"sid\",  sid);\n            }\n\n            session.set(infokey, new info({},{},{}));\n            globalInfo = session.get(infokey);\n            globalInfo.base_info.username  = $(\"[report-eventid$='MCommonHTail_Account']\").text().replace(/\\n/g,\"\").replace(/\\t/g,\"\");\n            saveInfo();\n            session.setProgress(10);\n            location.href=\"http://home.m.jd.com/maddress/address.action?\";\n        }\n\n        if (location.href.indexOf(\"://home.m.jd.com/maddress\") != -1) {\n            session.setProgress(20);\n\n            globalInfo = session.get(infokey);\n\n            global_contact_info = new contact_info([]);\n            var taskAddr = [];\n            var urlarray = $(\".ia-r\");\n            for(var i=0;i<urlarray.length;i++){\n                taskAddr.push($.get(urlarray[i],function(response,status){\n                    var node = $(\"<div>\").append($(response));\n                    var name = $.trim(node.find(\"#uersNameId\")[0].value);\n                    var phone = $.trim(node.find(\"#mobilePhoneId\")[0].value);\n                    var addr = $.trim(node.find(\"#addressLabelId\")[0].innerHTML);\n                    var detail = $.trim(node.find(\"#address_where\")[0].innerHTML);\n\n                    global_contact_info.contact_detail.push(new contact(name,addr,detail,phone, \"\"));\n                }) );\n\n            }\n\n\n            $.when.apply($,taskAddr).done(\n                // $.when(taskAddr).done(\n                function(){\n                    globalInfo.contact_info = global_contact_info;\n                    saveInfo();\n                    session.setProgress(30);\n                    getOrder();\n                });\n\n\n        }\n\n\n        function getOrder(){\n            session.setProgress(40);\n            globalInfo = session.get(infokey);\n            var orders = new order_info([]);\n            globalInfo.order_info = new order_info([]);\n            globalInfo.order_info.order_detail = [];\n            function getPageOrder(page){\n                $.getJSON(\"https://home.m.jd.com//newAllOrders/newAllOrders.json?sid=\"+sid+\"&page=\"+page,function(d){\n                    page++;\n                    if( globalInfo.order_info.order_detail.length <=  max_order_num && d.orderList.length!==0 && (orders.order_detail.length === 0 || d.orderList[d.orderList.length-1].orderId !== orders.order_detail[orders.order_detail.length-1].orderId) ){\n                        orders.order_detail = orders.order_detail.concat(d.orderList);\n                        var task = [];\n                        var tempOrder = [];\n                        if(globalInfo.order_info.order_detail.length < max_order_num){\n                            if(d.orderList.length + globalInfo.order_info.order_detail.length > max_order_num){\n                                d.orderList = d.orderList.slice(0, max_order_num -  globalInfo.order_info.order_detail.length);\n                            }\n                            task.push($.each(d.orderList,function(i,e){\n                                log(\"task push orderId: \" + d.orderList[i].orderId);\n\n//                                           $.get(\"https://home.m.jd.com/newAllOrders/queryOrderDetailInfo.action?orderId=\"+ d.orderList[i].orderId+\"&from=newUserAllOrderList&passKey=\"+d.passKeyList[i]+\"&sid=\"+sid,\n//                                                   function(response,status){\n//                                                        log(\"orderId: \" + d.orderList[i].orderId);\n//                                                        var addr = $(\"<div>\").append($(response)).find(\".step2-in-con\").text();\n//                                                        var orderitem = new order(d.orderList[i].orderId,d.orderList[i].dataSubmit,d.orderList[i].price,addr);\n//\n//                                                        orderitem.products = [];\n//                                                        var products = $(\"<div>\").append($(response)).find(\".pdiv\");\n//                                                        $.each(products,function(k, e){\n//                                                                                                       var name = $(\"<div>\").append(products[k]).find(\".sitem-m-txt\").text();\n//                                                                                                       var price = $(\"<div>\").append(products[k]).find(\".sitem-r\").text();\n//                                                                                                       var num = $(\"<div>\").append(products[k]).find(\".s3-num\").text();\n//                                                                                                       orderitem.products.push(new product(name,  num ,price));\n//                                                         });\n//                                                         if(Date.parse(new Date()) < ((new Date(orderitem.time.split(\" \")[0])).getTime() + max_order_date * 24 * 60 * 60 * 1000)){\n//                                                              if(globalInfo.order_info.order_detail.length < max_order_num){\n//                                                                   globalInfo.order_info.order_detail.push(orderitem);\n//                                                              }\n//                                                            }\n//                                                        });\n                                $.ajax({\n                                    type : \"get\",\n                                    url : \"https://home.m.jd.com/newAllOrders/queryOrderDetailInfo.action?orderId=\"+ d.orderList[i].orderId+\"&from=newUserAllOrderList&passKey=\"+d.passKeyList[i]+\"&sid=\"+sid,\n                                    async : false,\n                                    success : function(response){\n                                        log(\"orderId: \" + d.orderList[i].orderId);\n                                        var addr = $.trim($(\"<div>\").append($(response)).find(\".step2-in-con\").text());\n                                        var orderitem = new order(d.orderList[i].orderId,d.orderList[i].dataSubmit,d.orderList[i].price,addr);\n\n                                        orderitem.products = [];\n                                        var products = $(\"<div>\").append($(response)).find(\".pdiv\");\n                                        $.each(products,function(k, e){\n                                            var name = $.trim($(\"<div>\").append(products[k]).find(\".sitem-m-txt\").text());\n                                            var price = $.trim($(\"<div>\").append(products[k]).find(\".sitem-r\").text());\n                                            var num = $.trim($(\"<div>\").append(products[k]).find(\".s3-num\").text());\n                                            orderitem.products.push(new product(name,  num ,price));\n                                        });\n                                        if(Date.parse(new Date()) < ((new Date(orderitem.time.split(\" \")[0])).getTime() + max_order_date * 24 * 60 * 60 * 1000)){\n                                            if(globalInfo.order_info.order_detail.length < max_order_num){\n                                                globalInfo.order_info.order_detail.push(orderitem);\n                                            }\n                                        }\n                                    }\n                                });\n                            }));\n                        }\n\n\n                        $.when(task).done(function(){\n                            log(\"get page :\" + page);\n                            log(\"count: \" +globalInfo.order_info.order_detail.length );\n                            getPageOrder(page);\n                            globalInfo.order_info.order_detail.sort(compare());\n                        });\n\n                    }else {\n                        log(\"finish\");\n                        saveInfo();\n                        session.setProgress(60);\n                        getUserInfo();\n                        return;\n                    }\n                });\n            }\n            getPageOrder(1);\n        }\n\n        function compare(){\n            return function(a,b){\n                var value1 = (new Date(a.time.split(\" \")[0])).getTime();\n                var value2 = (new Date(b.time.split(\" \")[0])).getTime();\n                return value2 - value1;\n            };\n        }\n\n        function getUserInfo(){\n            location.href = \"http://home.m.jd.com/user/accountCenter.action\";\n        }\n        if (location.href.indexOf(\"://home.m.jd.com/user/accountCenter.action\") !== -1 && location.href.indexOf(\"loginpage\") == -1) {\n            session.setProgress(70);\n            if($('#shimingrenzheng')[0] !== undefined){\n                $('#shimingrenzheng')[0].click();\n            }\n        }\n\n        //已实名用户\n        if (location.href.indexOf(\"msc.jd.com/auth/loginpage/wcoo/toAuthInfoPage\") !== -1) {\n            session.setProgress(90);\n            globalInfo = session.get(infokey);\n            if( $(\".pos-ab\")[0] !== undefined){\n                globalInfo.base_info.name  = $(\".pos-ab\")[0].innerHTML;\n            }\n            if($(\".pos-ab\")[1] !== undefined){\n                globalInfo.base_info.idcard_no  = $(\".pos-ab\")[1].innerHTML;\n            }\n            saveInfo();\n            logout();\n\n\n        }\n\n        function logout(){\n\n            //alert(\"爬取订单总计:\" + session.get(infokey).order_info.order_detail.length);\n            //location.href = \"https://passport.m.jd.com/user/logout.action?sid=\"+session.get(\"sid\");\n            session.setProgress(100);\n            session.upload(session.get(infokey));\n            session.finish();\n        }\n        //快捷卡实名用户\n        if (location.href.indexOf(\"msc.jd.com/auth/loginpage/wcoo/toAuthPage\") != -1 ) {\n            session.setProgress(90);\n            globalInfo = session.get(infokey);\n            if($(\"#username\")[0] !==undefined){\n                globalInfo.base_info.name  = $(\"#username\")[0].innerHTML;\n            }\n            if($(\".info-user-name\")[0] !==undefined){\n                globalInfo.base_info.name  = $(\".info-user-name\")[0].innerHTML;\n            }\n            if($(\"#idcard\")[0] !==undefined){\n                globalInfo.base_info.idcard_no  = $(\"#idcard\")[0].innerHTML;\n            }\n            if($(\".pos-ab[data-cardno]\") !==undefined){\n                globalInfo.base_info.idcard_no  = $(\".pos-ab[data-cardno]\").attr(\"data-cardno\");\n            }\n\n            saveInfo();\n            logout();\n        }\n\n        function saveInfo(){\n            session.set(infokey, globalInfo);\n        }\n\n\n\n        function addr(name,phone,addrdetail) {\n            this.name = name;\n            this.phone = phone;\n            this.addrdetail = addrdetail;\n        }\n\n        var address = [];\n        var global_contact_info;\n\n\n        function info(base_info,contact_info,order_info ){\n            this.site_id = 2;\n            this.base_info = base_info;\n            this.contact_info = contact_info;\n            this.order_info  = order_info;\n        }\n\n        function base_info(username, name, idcard_no, phone){\n            this.username = username;\n            this.name = name;\n            this.idcard_no = idcard_no;\n            this.phone = phone;\n        }\n\n\n        function contact_info(contact_detail){\n            this.contact_detail = contact_detail;\n        }\n\n        function contact(name, location ,address, phone, zipcode){\n            this.name  = name;\n            this.location  = location;\n            this.address  = address;\n            this.phone  = phone;\n            this.zipcode  = zipcode;\n        }\n\n        function order_info(order_detail){\n            this.order_detail  = order_detail;\n        }\n\n        function order(id, time , total, address){\n            this.id  = id;\n            this.time  = time;\n            this.total  = total;\n            this.address  = address;\n        }\n\n        function product(name, number, price){\n            this.name  = name;\n            this.number  = number;\n            this.price  = price;\n        }\n\n        // 增加判断当前页面是否是登录页  modify by renxin 2017.1.17\n        if ($(\"#loginOneStep\").length && $(\"#loginOneStep\").length > 0) {\n            session.setStartUrl();\n        }\n\n\n//end\n    });;\n}()"]}