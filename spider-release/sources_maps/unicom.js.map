{"version":3,"sources":["unicom.js"],"names":["dSpider","session","env","$","parseThxd","msg","find","each","data","text","first","replace","length","monthData","get","datas","push","set","log","JSON","stringify","getThxdByAjax","year","month","curMonthData","parseInt","Date","getTime","toString","ajax","url","type","success","html","totalrow","endrow","loadMore","thxd","spide","error","xhr","_this","beginrow","perrow","href","getrandom","params","pagenum","load","monthArr","setProgress","monthObj","shift","window","location","endSpide","upload","finish","showProgress","indexOf","date","curMonth","getMonth","curYear","getFullYear","i","max","setProgressMax","infoTag","attr","userInfo","e","len"],"mappings":"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","file":"../unicom.js","sourcesContent":["dSpider(\"unicom\", 60*5, function(session,env,$){\n\n    function parseThxd(msg) {\n        $(msg).find(\"tr.tips_dial\").each(function() {\n            var data = {}\n            data[\"otherNo\"] = $(this).find(\"label.telphone\").text();\n            data[\"callTime\"] = $(this).find(\"td:eq(1) p\").first().text();\n            data[\"callFee\"] = $(this).find(\"p.time:eq(0)\").text().replace(/[\\n|\\s]/g, \"\").replace();\n            data[\"callBeginTime\"] = $(this).find(\"p.time:eq(1)\").text().replace(/[\\n|\\s]/g, \"\").replace();\n            data[\"callType\"] = ($(this).find(\".call_out\").length == 1) ? \"主叫\" : \"被叫\";\n\n            var monthData = session.get(\"curMonthData\")\n            var datas = monthData[\"data\"]\n            if(!datas) {\n                datas = []\n            }\n            datas.push(data)\n            monthData[\"data\"] = datas;\n            session.set(\"curMonthData\", monthData)\n            log(\"获取一条数据：\" + JSON.stringify(data))\n        })\n    }\n\n    function getThxdByAjax(year, month) {\n        log(\"开始爬取【\" + month + \"】月份通话详单：\")\n        //session.upload(\"开始爬取【\" + month + \"】月份通话详单：\")\n        var curMonthData = {}\n        curMonthData[\"calldate\"] = year + \"\" + month\n        curMonthData[\"cid\"] = parseInt(new Date().getTime()/1000).toString()\n        session.set(\"curMonthData\", curMonthData)\n        $.ajax({\n            url: '/mobileService/query/getPhoneByDetailContent.htm',\n            type: 'post',\n            data: 't=' + new Date().getTime() + '&YYYY=' + year + '&MM=' + month + '&DD=&queryMonthAndDay=month&menuId=',\n            //dataType: 'html',\n            //async: true,\n            //cache: false,\n            success: function(msg) {\n                log(\"请求\" + month + \"月份数据成功....\")\n                parseThxd(msg);\n                $('#pageNew').html(msg);\n                //保存数据\n                var data = session.get(\"curMonthData\")\n                data[\"totalCount\"] = totalrow\n                data[\"status\"] = 4\n                session.set(\"curMonthData\", data)\n\n                //是否需要加载更多\n                if (endrow < totalrow) {\n                    loadMore();\n                } else {\n                    var thxd = session.get(\"thxd\")\n                    if(!thxd) {\n                        thxd = {};\n                        thxd[\"month_status\"] = [];\n                    }\n                    thxd[\"month_status\"].push(data)\n                    session.set(\"thxd\", thxd)\n                    session.set(\"curMonthData\", \"\")\n                    log(\"爬取数据完成...\" + JSON.stringify(data))\n                    spide();\n                }\n            },\n            error: function(xhr, msg){\n                //保存数据\n                var data = session.get(\"curMonthData\")\n                data[\"totalCount\"] = 0\n                data[\"status\"] = 2\n                data[\"data\"] = []\n                var thxd = session.get(\"thxd\")\n                if(!thxd) {\n                    thxd = {};\n                    thxd[\"month_status\"] = [];\n                }\n                thxd[\"month_status\"].push(data)\n                session.set(\"thxd\", thxd)\n                session.set(\"curMonthData\", \"\")\n\n                log(\"爬取【\" + month + \"】月份通话详单失败！\")\n                spide();\n            }\n        });\n    }\n\n    function loadMore() {\n        log(\"加载更多...\")\n        var _this = $(this);\n        var beginrow = endrow;\n        endrow = beginrow + perrow;\n        if (endrow > totalrow) {\n            endrow = totalrow;\n        }\n        _this.html('<img src=\"http://img.client.10010.com/mobileService/view/client/images/loading.gif\" width=\"16\">');\n        var href = '/mobileService/view/client/query/xdcx/thxd_more_list.jsp?1=1&t=' + getrandom();\n        var params = '&beginrow=' + beginrow + '&endrow=' + endrow + '&pagenum=' + (pagenum + 1);\n        $('.moredetail' + pagenum).load(href + params, function(msg) {\n            parseThxd(msg);\n            var thxd = session.get(\"thxd\")\n            if(!thxd) {\n                thxd = {};\n                thxd[\"month_status\"] = [];\n            }\n            thxd[\"month_status\"].push(session.get(\"curMonthData\"))\n            session.set(\"thxd\", thxd)\n            session.set(\"curMonthData\", \"\")\n            //继续爬取\n            spide();\n        });\n    }\n\n    function spide() {\n        var monthArr = session.get(\"months\")\n        if (monthArr && monthArr.length > 0) {\n            session.setProgress(session.get(\"max\") - monthArr.length - 1)\n            var monthObj = monthArr.shift();\n            session.set(\"months\", monthArr)\n            getThxdByAjax(monthObj.year, monthObj.month);\n        } else {\n            var thxd = session.get(\"thxd\")\n            log(\"爬取通话详单完毕----------\" + JSON.stringify(thxd))\n            //跳转到服务首页\n            window.location.href = \"http://wap.10010.com/mobileService/siteMap.htm\"\n        }\n    }\n\n    function endSpide(thxd) {\n        log(\"爬取完毕----------\" + JSON.stringify(thxd))\n        session.upload(JSON.stringify(thxd))\n        session.setProgress(session.get(\"max\") - 0)\n        session.finish()\n        session.showProgress(false)\n    }\n\n    if(window.location.href.indexOf(\"/uac.10010.com/oauth2/new_auth\") != -1) {\n        session.showProgress(false)\n    } if(window.location.href.indexOf('query/getPhoneByDetailTip.htm') != -1){\n        //显示loading\n        session.showProgress()\n\n        //计算月份信息\n        var date = new Date();\n        var curMonth = date.getMonth() + 1;\n        var curYear = date.getFullYear();\n        var monthArr = []\n        for (var i = 0; i < 6; i++) {\n            var month = curMonth - i;\n            var year = curYear;\n            if (month < 1) {\n                month += 12;\n                year -= 1;\n            }\n            if (month < 10) {\n                month = \"0\" + month;\n            }\n            monthArr.push({ \"year\": year, \"month\": month });\n        }\n        var max = monthArr.length + 1;\n        //设置月份信息\n        session.set(\"months\", monthArr)\n        session.set(\"max\", max)\n        session.setProgressMax(max)\n        log(\"开始爬取.....\" + JSON.stringify(monthArr))\n        spide()\n    } else if(window.location.href.indexOf('mobileService/siteMap.htm') != -1){//服务界面，获取个人信息跳转\n        var infoTag = \"\"\n        $(\".checklistcontainer.newmore\").find(\"li\").each(function(){\n            if($(this).html().indexOf(\"基本信息\") != -1) {\n                infoTag = $(this)\n                return\n            }\n        });\n        if(infoTag) {\n            //跳转到我的基本信息页面\n            window.location.href = infoTag.attr(\"name\")\n        } else {\n            log(\"用户信息获取失败.....\")\n            var thxd = session.get(\"thxd\")\n            thxd[\"user_info\"] = {}\n            endSpide(thxd)\n        }\n    } else if(window.location.href.indexOf(\"t/operationservice/getUserinfo.htm\") !=-1 ) {//获取个人信息\n        log(\"开始爬取用户信息----------\")\n        var userInfo = {}\n        try {\n            userInfo[\"mobile\"] = $(\".clientInfo4_top\").find(\"p:eq(0)\").html().replace(/[\\n|\\s]/g, \"\").replace()\n        } catch (e) {\n        }\n        try{\n            userInfo[\"name\"] = $(\".clientInfo4_list\").find(\"li:eq(0)\").find(\"span:eq(1)\").html().replace(/[\\n|\\s]/g, \"\").replace()\n        } catch (e) {\n        }\n        try{\n            userInfo[\"taocan\"] = $(\".clientInfo4_list\").find(\"li:eq(1)\").find(\"span:eq(1)\").html().replace(/[\\n|\\s]/g, \"\").replace()\n        } catch (e) {\n        }\n        try{\n            userInfo[\"registration_time\"] = $(\".detail_con.con_ft:eq(0)\").find(\"p:eq(6)\").find(\"span:eq(1)\").text().replace(/[\\n|\\s]/g, \"\").replace()\n        } catch (e) {\n        }\n        try{\n            userInfo[\"idcard_no\"] = $(\".detail_con.con_ft:eq(1)\").find(\"p:eq(4)\").find(\"span:eq(1)\").text().replace(/[\\n|\\s]/g, \"\").replace()\n        } catch (e) {\n        }\n        try{\n            userInfo[\"household_address\"] = $(\".detail_con.con_ft:eq(1)\").find(\"p:eq(18)\").find(\"span:eq(1)\").text().replace(/[\\n|\\s]/g, \"\").replace()\n        } catch (e) {\n        }\n        log(\"爬取用户信息结束-----\" + JSON.stringify(userInfo))\n        var thxd = session.get(\"thxd\")\n        thxd[\"user_info\"] = userInfo\n        var len = thxd[\"month_status\"].length;\n        for(var i = 0; i < len; i ++) {\n            thxd[\"month_status\"][i][\"mobile\"] = userInfo[\"mobile\"]\n        }\n        endSpide(thxd)\n    }\n})"]}