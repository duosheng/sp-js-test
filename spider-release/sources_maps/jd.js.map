{"version":3,"sources":["jd.js"],"names":["dSpider","session","env","$","infokey","sid","get","max_order_num","max_order_date","globalInfo","location","href","indexOf","undefined","style","display","val","getLocal","click","setLocal","set","showProgress","setProgressMax","autoLoadImg","setProgress","children","value","info","base_info","username","saveInfo","upload","finish","global_contact_info","contact_info","taskAddr","urlarray","i","length","push","response","status","node","append","name","trim","find","phone","addr","innerHTML","detail","contact_detail","contact","when","apply","done","getOrder","order_info","order_detail","getPageOrder","page","getJSON","d","orderList","orderId","task","slice","each","e","passKeyList","text","orderitem","order","dataSubmit","price","products","k","eq","num","product","Date","parse","time","split","getTime","sort","compare","getUserInfo","a","b","value1","value2","idcard_no","logout","attr","addrdetail","address","site_id","zipcode","id","total","number","setStartUrl"],"mappings":"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","file":"../jd.js","sourcesContent":["\ndSpider(\"jd\", function(session,env,$){\n    var infokey = \"infokey\";\n    var sid = session.get(\"sid\");\n    var max_order_num = 30;\n    var max_order_date = 100;\n    var globalInfo;\n\n    // 登录页 缓存用户名密码\n    if (location.href.indexOf(\"https://plogin.m.jd.com/user/login.action?appid=100\") != -1 ) {\n            //隐藏页面跳转链接\n            if($(\".quick-nav\") !== undefined){\n                $(\".quick-nav\")[0].style.display=\"none\";\n            }\n            if($(\".quick-login\") !== undefined){\n                $(\".quick-login\")[0].style.display=\"none\";\n            }\n            if($(\".remberme\") !== undefined){\n                $(\".remberme\")[0].style.display=\"none\";\n            }\n\n\n            $(\"#username\").val(session.getLocal(\"username\"));\n            $(\"#password\").val(session.getLocal(\"password\"));\n\n            $(\"#loginBtn\").click(function(){\n                session.setLocal(\"password\", $(\"#password\").val());\n                session.setLocal(\"username\", $(\"#username\").val());\n            })\n    }\n\n    if (location.href.indexOf(\"://m.jd.com\") !== -1 ) {\n        if(session.get(\"firstrun\") == undefined){\n            session.set(\"firstrun\", 0);\n            session.showProgress(true);\n            session.setProgressMax(100);\n            session.autoLoadImg(false);\n            session.setProgress(5);\n\n            if($(\".jd-search-form-input\")[0] !== undefined){\n                sid  = $(\".jd-search-form-input\")[0].children[0].value;\n                session.set(\"sid\",  sid);\n             }\n\n            session.set(infokey, new info({},{},{}));\n            globalInfo = session.get(infokey);\n            globalInfo.base_info.username  = session.getLocal(\"username\");\n            saveInfo();\n            session.setProgress(10);\n            location.href=\"https://home.m.jd.com/maddress/address.action?\";\n        }else{\n            session.setProgress(100);\n            session.upload(session.get(infokey));\n            session.finish();\n        }\n\n    }\n\n    if (location.href.indexOf(\"://home.m.jd.com/maddress\") != -1) {\n        session.setProgress(20);\n\n        globalInfo = session.get(infokey);\n\n        global_contact_info = new contact_info([]);\n        var taskAddr = [];\n        var urlarray = $(\".ia-r\");\n        for(var i=0;i<urlarray.length;i++){\n            taskAddr.push($.get(urlarray[i],function(response,status){\n                var node = $(\"<div>\").append($(response));\n                var name = $.trim(node.find(\"#uersNameId\")[0].value);\n                var phone = $.trim(node.find(\"#mobilePhoneId\")[0].value);\n                var addr = $.trim(node.find(\"#addressLabelId\")[0].innerHTML);\n                var detail = $.trim(node.find(\"#address_where\")[0].innerHTML);\n                global_contact_info.contact_detail.push(new contact(name,addr,detail,phone, \"\"));\n               })\n            );\n         }\n\n         $.when.apply($,taskAddr).done(\n             function(){\n                globalInfo.contact_info = global_contact_info;\n                saveInfo();\n                session.setProgress(30);\n                getOrder();\n             }\n         );\n\n    }\n\n\n    function getOrder(){\n        session.setProgress(40);\n        globalInfo = session.get(infokey);\n        globalInfo.order_info = new order_info([]);\n        globalInfo.order_info.order_detail = [];\n        getPageOrder(1);\n    }\n\n    function getPageOrder(page){\n       $.getJSON(\"https://home.m.jd.com//newAllOrders/newAllOrders.json?sid=\"+sid+\"&page=\"+page,function(d){\n           page++;\n           if( globalInfo.order_info.order_detail.length <=  max_order_num && d.orderList.length!==0 &&\n           (globalInfo.order_info.order_detail.length === 0 ||\n            d.orderList[d.orderList.length-1].orderId !== globalInfo.order_info.order_detail[globalInfo.order_info.order_detail.length-1].orderId) ){\n               var task = [];\n               if(globalInfo.order_info.order_detail.length < max_order_num){\n                   if(d.orderList.length + globalInfo.order_info.order_detail.length > max_order_num){\n                       d.orderList = d.orderList.slice(0, max_order_num -  globalInfo.order_info.order_detail.length);\n                   }\n                   task.push($.each(d.orderList,function(i,e){\n                   return $.get( \"https://home.m.jd.com/newAllOrders/queryOrderDetailInfo.action?orderId=\"+\n                                 d.orderList[i].orderId+\"&from=newUserAllOrderList&passKey=\"+d.passKeyList[i]+\"&sid=\"+sid,\n                                 function(response, status){\n                                       var addr = $.trim($(response).find(\".step2-in-con\").text());\n                                       var orderitem = new order(d.orderList[i].orderId,d.orderList[i].dataSubmit,d.orderList[i].price,addr);\n\n                                       orderitem.products = [];\n                                       var products = $(response).find(\".pdiv\");\n                                       $.each(products,function(k, e){\n                                           var name = $.trim(products.eq(k).find(\".sitem-m-txt\").text());\n                                           var price = $.trim(products.eq(k).find(\".sitem-r\").text());\n                                           var num = $.trim(products.eq(k).find(\".s3-num\").text());\n                                           orderitem.products.push(new product(name,  num ,price));\n                                       });\n                                       if(Date.parse(new Date()) < ((new Date(orderitem.time.split(\" \")[0])).getTime() +\n                                       max_order_date * 24 * 60 * 60 * 1000)){\n                                           if(globalInfo.order_info.order_detail.length < max_order_num){\n                                               globalInfo.order_info.order_detail.push(orderitem);\n                                           }\n                                       }\n                                   }\n                            );\n\n//                       return $.ajax({\n//                           type : \"get\",\n//                           url : \"https://home.m.jd.com/newAllOrders/queryOrderDetailInfo.action?orderId=\"+\n//                           d.orderList[i].orderId+\"&from=newUserAllOrderList&passKey=\"+d.passKeyList[i]+\"&sid=\"+sid,\n//                           async : false,\n//                           success : function(response){\n//                                var addr = $.trim($(\"<div>\").append($(response)).find(\".step2-in-con\").text());\n//                                var orderitem = new order(d.orderList[i].orderId,d.orderList[i].dataSubmit,d.orderList[i].price,addr);\n//\n//                                orderitem.products = [];\n//                                var products = $(\"<div>\").append($(response)).find(\".pdiv\");\n//                                $.each(products,function(k, e){\n//                                    var name = $.trim($(\"<div>\").append(products[k]).find(\".sitem-m-txt\").text());\n//                                    var price = $.trim($(\"<div>\").append(products[k]).find(\".sitem-r\").text());\n//                                    var num = $.trim($(\"<div>\").append(products[k]).find(\".s3-num\").text());\n//                                    orderitem.products.push(new product(name,  num ,price));\n//                                });\n//                                if(Date.parse(new Date()) < ((new Date(orderitem.time.split(\" \")[0])).getTime() +\n//                                max_order_date * 24 * 60 * 60 * 1000)){\n//                                    if(globalInfo.order_info.order_detail.length < max_order_num){\n//                                        globalInfo.order_info.order_detail.push(orderitem);\n//                                    }\n//                                }\n//                            }\n//                       });\n\n                    }));\n                }\n\n\n                $.when(task).done(function(){\n                   getPageOrder(page);\n                   globalInfo.order_info.order_detail.sort(compare());\n                });\n\n           }else {\n              saveInfo();\n              session.setProgress(60);\n              getUserInfo();\n              return;\n           }\n       });\n    }\n\n\n    function compare(){\n        return function(a,b){\n            var value1 = (new Date(a.time.split(\" \")[0])).getTime();\n            var value2 = (new Date(b.time.split(\" \")[0])).getTime();\n            return value2 - value1;\n    };\n    }\n\n    function getUserInfo(){\n           location.href = \"https://home.m.jd.com/user/accountCenter.action\";\n    }\n\n    if (location.href.indexOf(\"://home.m.jd.com/user/accountCenter.action\") !== -1 &&\n        location.href.indexOf(\"loginpage\") == -1) {\n        session.setProgress(70);\n        if($('#shimingrenzheng')[0] !== undefined){\n           $('#shimingrenzheng')[0].click();\n        }\n    }\n\n    //已实名用户\n    if (location.href.indexOf(\"msc.jd.com/auth/loginpage/wcoo/toAuthInfoPage\") !== -1) {\n        session.setProgress(90);\n        globalInfo = session.get(infokey);\n        if( $(\".pos-ab\")[0] !== undefined){\n            globalInfo.base_info.name  = $(\".pos-ab\")[0].innerHTML;\n        }\n        if($(\".pos-ab\")[1] !== undefined){\n            globalInfo.base_info.idcard_no  = $(\".pos-ab\")[1].innerHTML;\n        }\n        saveInfo();\n        logout();\n\n\n    }\n\n    function logout(){\n        //alert(\"爬取订单总计:\" + session.get(infokey).order_info.order_detail.length);\n        location.href = \"https://passport.m.jd.com/user/logout.action?sid=\"+session.get(\"sid\");\n    }\n\n    //快捷卡实名用户\n    if (location.href.indexOf(\"msc.jd.com/auth/loginpage/wcoo/toAuthPage\") != -1 ) {\n        session.setProgress(90);\n        globalInfo = session.get(infokey);\n        if($(\"#username\")[0] !==undefined){\n            globalInfo.base_info.name  = $(\"#username\")[0].innerHTML;\n        }\n        if($(\".info-user-name\")[0] !==undefined){\n                    globalInfo.base_info.name  = $(\".info-user-name\")[0].innerHTML;\n        }\n        if($(\"#idcard\")[0] !==undefined){\n            globalInfo.base_info.idcard_no  = $(\"#idcard\")[0].innerHTML;\n        }\n        if($(\".pos-ab[data-cardno]\") !==undefined){\n            globalInfo.base_info.idcard_no  = $(\".pos-ab[data-cardno]\").attr(\"data-cardno\");\n        }\n\n        saveInfo();\n        logout();\n    }\n\n\n    function saveInfo(){\n        session.set(infokey, globalInfo);\n    }\n\n\n\n    function addr(name,phone,addrdetail) {\n        this.name = name;\n        this.phone = phone;\n        this.addrdetail = addrdetail;\n    }\n\n    var address = [];\n    var global_contact_info;\n\n\n    function info(base_info,contact_info,order_info ){\n        this.site_id = 2;\n    　　 this.base_info = base_info;\n    　　 this.contact_info = contact_info;\n    　　 this.order_info  = order_info;\n    }\n\n    function base_info(username, name, idcard_no, phone){\n        this.username = username;\n        this.name = name;\n        this.idcard_no = idcard_no;\n        this.phone = phone;\n    }\n\n\n    function contact_info(contact_detail){\n        this.contact_detail = contact_detail;\n    }\n\n    function contact(name, location ,address, phone, zipcode){\n        this.name  = name;\n        this.location  = location;\n        this.address  = address;\n        this.phone  = phone;\n        this.zipcode  = zipcode;\n    }\n\n    function order_info(order_detail){\n        this.order_detail  = order_detail;\n    }\n\n    function order(id, time , total, address){\n        this.id  = id;\n        this.time  = time;\n        this.total  = total;\n        this.address  = address;\n    }\n\n    function product(name, number, price){\n        this.name  = name;\n        this.number  = number;\n        this.price  = price;\n    }\n\n    // 增加判断当前页面是否是登录页  modify by renxin 2017.1.17\n    if ($(\"#loginOneStep\").length && $(\"#loginOneStep\").length > 0) {\n      session.setStartUrl();\n    }\n\n//end\n});"]}