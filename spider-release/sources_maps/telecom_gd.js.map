{"version":3,"sources":["telecom_gd.js"],"names":["log","dSpider","session","env","$","location","href","indexOf","setStartUrl","console","showProgress","setProgressMax","autoLoadImg","setProgress","thxd","get","userInfo","timeout","t","setInterval","ob","text","clearInterval","JSON","stringify","set","waitDomAvailable","dom","timeSpan","val","address","length","getLoginUserType","setXd","months","curMonthIndex","phoneIndex","dateIndex","durationIndex","feeIndex","callTypeIndex","locationIndex","commuTypeIndex","details","datas","param","loginUser","loadXd","each","find","month","attr","push","start","end","SearchVerifyCode","trim","loadXdByMonth","ajax","url","type","dataType","data","beforeSend","success","result","b","c","r","code","current_page","r06","total_page","r05","r02","i","r03","s","parseInt","detail","Date","getTime","toString","sessionStorage","setItem","pathname","setTimeout","encodeURIComponent","search","msg","alert","showMask","error","err","textStatus","readyState","complete","xd","upload","finish","callback","_numStr","account","currNumBusiType","r04","payType","r07","latnId","r14","xdInit","showErr","getSmsCode","settime","isShow","maskDiv","append","button","click","certificateBtnAction","show","hide","test","window","countdown","obj","removeAttribute","xd_pwd","setAttribute","confirm","v","m"],"mappings":";;AAAAA,IAAI,iDAAJ;AACAC,QAAQ,YAAR,EAAsB,UAASC,OAAT,EAAiBC,GAAjB,EAAqBC,CAArB,EAAuB;AACzCJ,QAAI,mBAAiBK,SAASC,IAA9B;;AAGA,QAAGD,SAASC,IAAT,CAAcC,OAAd,CAAsB,wBAAtB,KAAmD,CAAC,CAAvD,EAA0D;AACtDL,gBAAQM,WAAR;AACR;AACQ;AACH,KAJD,MAIO,IAAGH,SAASC,IAAT,CAAcC,OAAd,CAAsB,uBAAtB,KAAkD,CAAC,CAAtD,EAAyD;AAC5DE,gBAAQT,GAAR,CAAY,uBAAZ;AACA;AACH,KAHM,MAGA,IAAGK,SAASC,IAAT,CAAcC,OAAd,CAAsB,+BAAtB,KAA0D,CAAC,CAA3D,IAAgEF,SAASC,IAAT,CAAcC,OAAd,CAAsB,0BAAtB,KAAqD,CAAC,CAAzH,EAA4H;;AAE/HL,gBAAQQ,YAAR;AACAR,gBAAQS,cAAR,CAAuB,GAAvB;AACAT,gBAAQU,WAAR,CAAoB,KAApB;AACAV,gBAAQW,WAAR,CAAoB,CAApB;AACA,YAAIC,OAAOZ,QAAQa,GAAR,CAAY,MAAZ,CAAX;AACA,YAAG,CAACD,IAAJ,EAAU;AACNA,mBAAO,EAAP;AACH;AACD,YAAIE,WAAWF,KAAK,WAAL,CAAf;AACA,YAAG,CAACE,QAAJ,EAAc;AACVA,uBAAW,EAAX;AACH;AACD,YAAG,CAACA,SAAS,MAAT,CAAJ,EAAsB;AAClB,gBAAIC,UAAU,KAAd;AACA,gBAAIC,IAAIC,YAAY,YAAY;AAC5BF,2BAAW,EAAX;AACA,oBAAIG,KAAKhB,EAAE,YAAF,CAAT;AACA,oBAAIgB,GAAG,CAAH,KAASA,GAAGC,IAAH,MAAa,IAA1B,EAAgC;AAC5BnB,4BAAQW,WAAR,CAAoB,EAApB;AACAS,kCAAcJ,CAAd;AACAF,6BAAS,MAAT,IAAmBI,GAAGC,IAAH,EAAnB;AACAZ,4BAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAeR,QAAf,CAAZ;AACAF,yBAAK,WAAL,IAAoBE,QAApB;AACAd,4BAAQuB,GAAR,CAAY,MAAZ,EAAoBX,IAApB;AACAT,6BAASC,IAAT,GAAgB,0EAAhB;AACH,iBARD,MAQO,IAAIW,WAAW,CAAf,EAAkB;AACrBf,4BAAQW,WAAR,CAAoB,EAApB;AACAS,kCAAcJ,CAAd;AACAb,6BAASC,IAAT,GAAgB,0EAAhB;AACH;AACJ,aAhBO,EAgBL,EAhBK,CAAR;AAiBH,SAnBD,MAmBO;AACHJ,oBAAQW,WAAR,CAAoB,EAApB;AACAR,qBAASC,IAAT,GAAgB,0EAAhB;AACH;AACJ,KArCM,MAqCA,IAAID,SAASC,IAAT,CAAcC,OAAd,CAAsB,8DAAtB,KAAyF,CAAC,CAA9F,EAAiG;;AAEpGmB,yBAAiB,eAAjB,EAAkC,UAASC,GAAT,EAAaC,QAAb,EAAuB;AACrD1B,oBAAQW,WAAR,CAAoB,EAApB;AACAb,gBAAI,2BAAJ;AACA,gBAAIc,OAAOZ,QAAQa,GAAR,CAAY,MAAZ,CAAX;AACA,gBAAG,CAACD,IAAJ,EAAU;AACNA,uBAAO,EAAP;AACH;AACD,gBAAIE,WAAWF,KAAK,WAAL,CAAf;AACA,gBAAG,CAACE,QAAJ,EAAc;AACVA,2BAAW,EAAX;AACH;AACD,gBAAG,CAACA,SAAS,MAAT,CAAJ,EAAsB;AAClBA,yBAAS,MAAT,IAAiBZ,EAAE,eAAF,EAAmByB,GAAnB,EAAjB;AACH;;AAEDb,qBAAS,WAAT,IAAsBZ,EAAE,YAAF,EAAgByB,GAAhB,EAAtB;AACAb,qBAAS,YAAT,IAAuBZ,EAAE,YAAF,EAAgByB,GAAhB,EAAvB;AACA,gBAAIC,UAAU1B,EAAE,eAAF,EAAmByB,GAAnB,EAAd;AACA,gBAAGC,QAAQC,MAAR,IAAkB,CAArB,EAAwB;AACpBD,0BAAU1B,EAAE,aAAF,EAAiByB,GAAjB,EAAV;AACH;AACDb,qBAAS,mBAAT,IAAgCc,OAAhC;;AAEAhB,iBAAK,WAAL,IAAoBE,QAApB;AACAd,oBAAQuB,GAAR,CAAY,MAAZ,EAAoBX,IAApB;;AAEAT,qBAASC,IAAT,GAAgB,iEAAhB;AACAG,oBAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAeR,QAAf,CAAZ;AACH,SA5BD,EA4BE,YAAW;AACTd,oBAAQW,WAAR,CAAoB,EAApB;AACAb,gBAAI,wBAAJ;AACAK,qBAASC,IAAT,GAAgB,iEAAhB;AACH,SAhCD;AAmCH,KArCM,MAqCA,IAAID,SAASC,IAAT,CAAcC,OAAd,CAAsB,0DAAtB,KAAqF,CAAC,CAA1F,EAA6F;;AAEhGmB,yBAAiB,QAAjB,EAA2B,UAASC,GAAT,EAAaC,QAAb,EAAuB;AAC9C1B,oBAAQW,WAAR,CAAoB,EAApB;AACAb,gBAAI,uBAAJ;AACA,gBAAIc,OAAOZ,QAAQa,GAAR,CAAY,MAAZ,CAAX;AACA,gBAAG,CAACD,IAAJ,EAAU;AACNA,uBAAO,EAAP;AACH;AACD,gBAAIE,WAAWF,KAAK,WAAL,CAAf;AACA,gBAAG,CAACE,QAAJ,EAAc;AACVA,2BAAW,EAAX;AACH;;AAEDA,qBAAS,QAAT,IAAmBZ,EAAE,QAAF,EAAYiB,IAAZ,EAAnB;;AAEAP,iBAAK,WAAL,IAAoBE,QAApB;AACAd,oBAAQuB,GAAR,CAAY,MAAZ,EAAoBX,IAApB;AACAL,oBAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAeR,QAAf,CAAZ;AACZ;AACYX,qBAASC,IAAT,GAAc,+DAAd;AACH,SAnBD,EAmBE,YAAW;AACTJ,oBAAQW,WAAR,CAAoB,EAApB;AACAb,gBAAI,iBAAJ;AACAK,qBAASC,IAAT,GAAc,+DAAd;AACH,SAvBD;AAyBH,KA3BM,MA2BA,IAAID,SAASC,IAAT,CAAcC,OAAd,CAAsB,wDAAtB,KAAmF,CAAC,CAAxF,EAA2F;AAC9FmB,yBAAiB,eAAjB,EAAkC,UAASC,GAAT,EAAaC,QAAb,EAAuB;AACrD1B,oBAAQW,WAAR,CAAoB,EAApB;AACAmB,6BAAiB,YAAY;AACzB;AACH,aAFD;AAGH,SALD,EAKE,YAAW;AACThC,gBAAI,wBAAJ;AACAiC,kBAAM,EAAN;AACH,SARD;AAUH;;AAGD,QAAIC,SAAS,EAAb;AACA,QAAIC,gBAAgB,CAApB;AACA,QAAIC,aAAa,CAAC,CAAlB;AACA,QAAIC,YAAY,CAAC,CAAjB;AACA,QAAIC,gBAAgB,CAAC,CAArB;AACA,QAAIC,WAAW,CAAC,CAAhB;AACA,QAAIC,gBAAgB,CAAC,CAArB;AACA,QAAIC,gBAAgB,CAAC,CAArB;AACA,QAAIC,iBAAiB,CAAC,CAAtB;;AAGA,QAAIC,UAAQ,EAAZ;AACA,QAAIC,QAAM,EAAV;AACA,QAAIC,QAAM,EAAV;;AAEA,QAAIC,YAAU,EAAd;;AAEA,aAASC,MAAT,GAAkB;;AAEd3C,UAAE4C,IAAF,CAAO5C,EAAE,UAAF,EAAc6C,IAAd,CAAmB,IAAnB,CAAP,EAAiC,YAAY;AACzC,gBAAIC,QAAQ,EAAZ;AACAA,kBAAM,OAAN,IAAiB9C,EAAE,IAAF,EAAQ+C,IAAR,CAAa,YAAb,CAAjB;AACAD,kBAAM,OAAN,IAAiB9C,EAAE,IAAF,EAAQ+C,IAAR,CAAa,YAAb,CAAjB;AACAD,kBAAM,KAAN,IAAe9C,EAAE,IAAF,EAAQ+C,IAAR,CAAa,UAAb,CAAf;AACAjB,mBAAOkB,IAAP,CAAYF,KAAZ;AACH,SAND;AAOAzC,gBAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAeU,MAAf,CAAZ;AACAC,wBAAgB,CAAhB;;AAEAU,gBAAM,EAAC,SAAQ,EAAT,EAAY,SAAQ,EAApB,EAAuB,SAAQ,EAA/B,EAAkC,SAAQ,EAA1C,EAA6C,SAAQ,IAArD,EAA0D,SAAQ,GAAlE,EAAsE,SAAQ,EAA9E,EAAiF,SAAQ,GAAzF,EAAN;AACAA,cAAM,OAAN,IAAe,CAAf;AACAA,cAAM,OAAN,IAAe,MAAf;AACA;AACA;AACA;AACAA,cAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBe,KAArC;AACAL,cAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBkB,KAArC;AACAR,cAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBmB,GAArC;AACA,YAAIC,mBAAiBnD,EAAE,aAAF,EAAiByB,GAAjB,GAAuB2B,IAAvB,EAArB;AACAX,cAAM,OAAN,IAAeU,gBAAf;;AAGAE;AACH;;AAED,aAASA,aAAT,GAAyB;AACrBrD,UAAEsD,IAAF,CAAO;AACHC,iBAAI,8CADD;AAEHC,kBAAK,KAFF;AAGHC,sBAAS,MAHN;AAIHC,kBAAKjB,KAJF;AAKHkB,wBAAW,sBAAU;AACjBtD,wBAAQT,GAAR,CAAY,YAAZ;AACAS,wBAAQT,GAAR,CAAY6C,KAAZ;AACH,aARE;AASHmB,qBAAQ,iBAASC,MAAT,EAAgB;AACpBxD,wBAAQT,GAAR,CAAY6C,KAAZ;AACApC,wBAAQT,GAAR,CAAYiE,MAAZ;AACA,oBAAGA,UAAQA,OAAOC,CAAf,IAAkBD,OAAOC,CAAP,CAASC,CAAT,KAAa,IAAlC,EAAuC;AAAC;AACpC,4BAAOF,OAAOG,CAAP,CAASC,IAAhB;AACI,6BAAK,KAAL;AACA,6BAAK,KAAL;AACIJ,qCAAOA,OAAOG,CAAP,IAAUH,MAAjB;AACA,gCAAIK,eAAaL,OAAOM,GAAxB;AACA,gCAAIC,aAAWP,OAAOQ,GAAtB;AACAH,4CAAc,CAAd,IAAiBlE,EAAE4C,IAAF,CAAOiB,OAAOS,GAAd,EAAkB,UAASC,CAAT,EAAW;AAC1C,oCAAG,KAAKpE,OAAL,CAAa,MAAb,KAAwB,CAAC,CAA5B,EAA+B;AAC3BmC,qDAAiBiC,CAAjB;AACH,iCAFD,MAEO,IAAG,KAAKpE,OAAL,CAAa,IAAb,KAAsB,CAAC,CAA1B,EAA6B;AAChC6B,iDAAauC,CAAb;AACH,iCAFM,MAEA,IAAG,KAAKpE,OAAL,CAAa,IAAb,KAAsB,CAAC,CAA1B,EAA6B;AAChC8B,gDAAYsC,CAAZ;AACH,iCAFM,MAEA,IAAG,KAAKpE,OAAL,CAAa,IAAb,KAAsB,CAAC,CAA1B,EAA6B;AAChC+B,oDAAgBqC,CAAhB;AACH,iCAFM,MAEA,IAAG,KAAKpE,OAAL,CAAa,IAAb,KAAsB,CAAC,CAA1B,EAA6B;AAChCgC,+CAAWoC,CAAX;AACH,iCAFM,MAEA,IAAG,KAAKpE,OAAL,CAAa,MAAb,KAAwB,CAAC,CAA5B,EAA+B;AAClCiC,oDAAgBmC,CAAhB;AACH,iCAFM,MAEA,IAAG,KAAKpE,OAAL,CAAa,KAAb,KAAuB,CAAC,CAA3B,EAA8B;AACjCkC,oDAAgBkC,CAAhB;AACH;AACJ,6BAhBgB,CAAjB;AAiBAvE,8BAAE4C,IAAF,CAAOiB,OAAOW,GAAd,EAAkB,YAAU;AACxB,oCAAId,OAAO,EAAX;AACA1D,kCAAE4C,IAAF,CAAO,IAAP,EAAa,UAAU2B,CAAV,EAAa;AACtB,wCAAIE,IAAI,OAAO,EAAf;AACA,wCAAIF,KAAKjC,cAAT,EAAyB;AACrBoB,6CAAK,YAAL,IAAqBe,CAArB;AACH,qCAFD,MAEO,IAAIF,KAAKvC,UAAT,EAAqB;AACxB0B,6CAAK,SAAL,IAAkBe,CAAlB;AACH,qCAFM,MAEA,IAAIF,KAAKtC,SAAT,EAAoB;AACvByB,6CAAK,eAAL,IAAwBe,CAAxB;AACH,qCAFM,MAEA,IAAIF,KAAKrC,aAAT,EAAwB;AAC3BwB,6CAAK,UAAL,IAAmBe,CAAnB;AACH,qCAFM,MAEA,IAAIF,KAAKpC,QAAT,EAAmB;AACtBuB,6CAAK,SAAL,IAAkBe,CAAlB;AACH,qCAFM,MAEA,IAAIF,KAAKnC,aAAT,EAAwB;AAC3BsB,6CAAK,UAAL,IAAmBe,CAAnB;AACH,qCAFM,MAEA,IAAIF,KAAKlC,aAAT,EAAwB;AAC3BqB,6CAAK,aAAL,IAAsBe,CAAtB;AACH;AACJ,iCAjBD;AAkBAjC,sCAAMQ,IAAN,CAAWU,IAAX;AACH,6BArBD;;AAuBA,gCAAGU,aAAWF,YAAd,EAA4B;AACxBzB,sCAAM,OAAN,IAAeiC,SAASjC,MAAM,OAAN,CAAT,IAAyB,CAAxC;AACA3C,wCAAQW,WAAR,CAAoB,KAAI,KAAGqB,OAAOH,MAAX,IAAoBI,gBAAcmC,eAAaE,UAA/C,CAAvB;AACAf;AACH,6BAJD,MAIO;AACHhD,wCAAQT,GAAR,CAAY,kBAAkBkC,OAAOC,aAAP,EAAsBe,KAApD;AACA,oCAAI6B,SAAS,EAAb;AACAA,uCAAO,UAAP,IAAqB7C,OAAOC,aAAP,EAAsBe,KAA3C;AACA6B,uCAAO,KAAP,IAAgBD,SAAS,IAAIE,IAAJ,GAAWC,OAAX,KAAqB,IAA9B,EAAoCC,QAApC,EAAhB;AACAH,uCAAO,MAAP,IAAiBnC,KAAjB;AACAmC,uCAAO,QAAP,IAAmB,CAAnB;AACApC,wCAAQS,IAAR,CAAa2B,MAAb;AACA;AACAnC,wCAAQ,EAAR;AACA,oCAAGT,gBAAgBD,OAAOH,MAAP,GAAc,CAAjC,EAAoC;AAChC7B,4CAAQW,WAAR,CAAoB,KAAG,MAAIsB,gBAAc,CAAlB,IAAqBD,OAAOH,MAAnD;AACAI;AACAU,0CAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBe,KAArC;AACAL,0CAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBkB,KAArC;AACAR,0CAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBmB,GAArC;AACAT,0CAAM,OAAN,IAAe,CAAf;AACApC,4CAAQT,GAAR,CAAY,mBAAmBmC,aAAnB,GAAmC,GAAnC,GAAyCD,OAAOC,aAAP,EAAsBe,KAA3E;AACAO;AACH,iCATD,MASO;AACHhD,4CAAQT,GAAR,CAAY,SAAZ;AACAS,4CAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAemB,OAAf,CAAZ;AACAV,0CAAMU,OAAN;AACH;AACJ;AACD;AACJ,6BAAK,KAAL;AAAW;AACPwC,2CAAeC,OAAf,CAAuB,iBAAvB,EAAyC/E,SAASgF,QAAlD;AACAC,uCAAW,YAAU;AACjBjF,yCAASC,IAAT,GAAc,0CAAwCiF,mBAAmBlF,SAASgF,QAAT,GAAkBhF,SAASmF,MAA9C,CAAtD;AACH,6BAFD,EAEE,IAFF;AAGJ;AAAQ;AACJ/E,oCAAQT,GAAR,CAAYiE,OAAOG,CAAP,CAASqB,GAArB;AACA,gCAAGxB,OAAOG,CAAP,CAASqB,GAAT,CAAalF,OAAb,CAAqB,KAArB,KAA+B,CAAC,CAAnC,EAAsC;AAClCmF,sCAAMzB,OAAOG,CAAP,CAASqB,GAAf;AACAE,yCAAS,IAAT;AACH,6BAHD,MAGO;AACnC;AACA;AACgC1D,sCAAM,EAAN;AACH;AA1FT;AA4FH,iBA7FD,MA6FK;AACDyD,0BAAM,cAAN;AACAjF,4BAAQT,GAAR,CAAY,eAAekC,OAAOC,aAAP,EAAsBe,KAAjD;AACA,wBAAI6B,SAAS,EAAb;AACAA,2BAAO,UAAP,IAAqB7C,OAAOC,aAAP,EAAsBe,KAA3C;AACA6B,2BAAO,KAAP,IAAgBD,SAAS,IAAIE,IAAJ,GAAWC,OAAX,KAAqB,IAA9B,EAAoCC,QAApC,EAAhB;AACAH,2BAAO,MAAP,IAAiBnC,KAAjB;AACA,wBAAGA,MAAMb,MAAN,GAAe,CAAlB,EAAqB;AACjBgD,+BAAO,QAAP,IAAmB,CAAnB;AACH,qBAFD,MAEO;AACHA,+BAAO,QAAP,IAAmB,CAAnB;AACH;AACDpC,4BAAQS,IAAR,CAAa2B,MAAb;AACA;AACAnC,4BAAQ,EAAR;AACA,wBAAGT,gBAAgBD,OAAOH,MAAP,GAAc,CAAjC,EAAoC;AAChC7B,gCAAQW,WAAR,CAAoB,KAAG,MAAIsB,gBAAc,CAAlB,IAAqBD,OAAOH,MAAnD;AACAI;AACAU,8BAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBe,KAArC;AACAL,8BAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBkB,KAArC;AACAR,8BAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBmB,GAArC;AACAT,8BAAM,OAAN,IAAe,CAAf;AACApC,gCAAQT,GAAR,CAAY,mBAAmBmC,aAAnB,GAAmC,GAAnC,GAAyCD,OAAOC,aAAP,EAAsBe,KAA3E;AACAO;AACH,qBATD,MASO;AACHhD,gCAAQT,GAAR,CAAY,SAAZ;AACAS,gCAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAemB,OAAf,CAAZ;AACAV,8BAAMU,OAAN;AACH;AACJ;AACJ,aAvIE;AAwIHiD,mBAAM,eAASC,GAAT,EAAaC,UAAb,EAAwB;AAC1BrF,wBAAQT,GAAR,CAAY,yBAAuB6F,IAAIE,UAA3B,GAAsC,cAAtC,GAAqDD,UAAjE;AACAJ,sBAAM,cAAN;;AAEAjF,wBAAQT,GAAR,CAAY,gBAAgBkC,OAAOC,aAAP,EAAsBe,KAAlD;AACA,oBAAI6B,SAAS,EAAb;AACAA,uBAAO,UAAP,IAAqB7C,OAAOC,aAAP,EAAsBe,KAA3C;AACA6B,uBAAO,KAAP,IAAgBD,SAAS,IAAIE,IAAJ,GAAWC,OAAX,KAAqB,IAA9B,EAAoCC,QAApC,EAAhB;AACAH,uBAAO,MAAP,IAAiBnC,KAAjB;AACA,oBAAGA,MAAMb,MAAN,GAAe,CAAlB,EAAqB;AACjBgD,2BAAO,QAAP,IAAmB,CAAnB;AACH,iBAFD,MAEO;AACHA,2BAAO,QAAP,IAAmB,CAAnB;AACH;AACDpC,wBAAQS,IAAR,CAAa2B,MAAb;AACA;AACAnC,wBAAQ,EAAR;AACA,oBAAGT,gBAAgBD,OAAOH,MAAP,GAAc,CAAjC,EAAoC;AAChC7B,4BAAQW,WAAR,CAAoB,KAAG,MAAIsB,gBAAc,CAAlB,IAAqBD,OAAOH,MAAnD;AACAI;AACAU,0BAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBe,KAArC;AACAL,0BAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBkB,KAArC;AACAR,0BAAM,OAAN,IAAeX,OAAOC,aAAP,EAAsBmB,GAArC;AACAT,0BAAM,OAAN,IAAe,CAAf;AACApC,4BAAQT,GAAR,CAAY,mBAAmBmC,aAAnB,GAAmC,GAAnC,GAAyCD,OAAOC,aAAP,EAAsBe,KAA3E;AACAO;AACH,iBATD,MASO;AACHhD,4BAAQT,GAAR,CAAY,SAAZ;AACAS,4BAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAemB,OAAf,CAAZ;AACAV,0BAAMU,OAAN;AACH;AACJ,aAvKE;AAwKHqD,sBAAS,oBAAU;AACfvF,wBAAQT,GAAR,CAAY,UAAZ;AACH;AA1KE,SAAP;AA4KH;;AAED,aAASiC,KAAT,CAAegE,EAAf,EAAmB;AACf,YAAInF,OAAOZ,QAAQa,GAAR,CAAY,MAAZ,CAAX;AACA,YAAG,CAACD,IAAJ,EAAU;AACNA,mBAAO,EAAP;AACH;AACDA,aAAK,cAAL,IAAuBmF,EAAvB;AACA/F,gBAAQuB,GAAR,CAAY,MAAZ,EAAoBX,IAApB;;AAEAZ,gBAAQW,WAAR,CAAoB,GAApB;;AAEAb,YAAI,mBAAmBuB,KAAKC,SAAL,CAAeV,IAAf,CAAvB;AACAZ,gBAAQgG,MAAR,CAAe3E,KAAKC,SAAL,CAAeV,IAAf,CAAf;AACAZ,gBAAQiG,MAAR;AACH;;AAGD,aAASnE,gBAAT,CAA0BoE,QAA1B,EAAmC;AAC/BhG,UAAEsD,IAAF,CAAO;AACHC,iBAAI,8CADD;AAEHC,kBAAK,KAFF;AAGHC,sBAAS,MAHN;AAIHC,kBAAK,EAJF;AAKHC,wBAAW,sBAAU,CACpB,CANE;AAOHC,qBAAQ,iBAASC,MAAT,EAAgB;AACpB,oBAAGA,UAAQA,OAAOC,CAAf,IAAkBD,OAAOC,CAAP,CAASC,CAAT,KAAa,IAAlC,EAAuC;AAAC;AACpC,4BAAOF,OAAOG,CAAP,CAASC,IAAhB;AACI,6BAAK,KAAL;AACI,gCAAID,IAAEH,OAAOG,CAAb;AAAA,gCAAeiC,OAAf;AACAvD,sCAAUwD,OAAV,GAAmBlC,EAAEQ,GAAF,IAAOR,EAAEM,GAA5B,CAFJ,CAEoC;AAChC5B,sCAAUyD,eAAV,GAA4BnC,EAAEK,GAAF,IAAOL,EAAEoC,GAArC,CAHJ,CAG6C;AACzC1D,sCAAU2D,OAAV,GAAoBrC,EAAEsC,GAAtB,CAJJ,CAI8B;AAC1B5D,sCAAU6D,MAAV,GAAkBvC,EAAEwC,GAApB,CALJ,CAK4B;AACxB1G,oCAAQW,WAAR,CAAoB,EAApB;AACA;AACAJ,oCAAQT,GAAR,CAAYuB,KAAKC,SAAL,CAAesB,SAAf,CAAZ;AACA;AAC5B;AAC4B+D;AACA;AACJ,6BAAK,KAAL,CAdJ,CAce;AACX;AAAQ;AACJ5E,kCAAM,EAAN;AACA6E,oCAAQ7C,OAAOG,CAAP,CAASqB,GAAjB;AAjBR;AAmBH,iBApBD,MAoBK;AACDxD,0BAAM,EAAN;AACAxB,4BAAQT,GAAR,CAAY,gBAAZ;AACH;AACJ,aAhCE;AAiCH4F,mBAAM,eAASC,GAAT,EAAaC,UAAb,EAAwB;AAC1B7D,sBAAM,EAAN;AACAxB,wBAAQT,GAAR,CAAY,yBAAuB6F,IAAIE,UAA3B,GAAsC,cAAtC,GAAqDD,UAAjE;AACH,aApCE;AAqCHE,sBAAS,oBAAU,CAClB;AAtCE,SAAP;AAwCH;;AAED;;;;;AAKA,aAASe,UAAT,GAAqB;AACjBtG,gBAAQT,GAAR,CAAY,gBAAgB8C,UAAU6D,MAA1B,GAAmC,GAAnC,GAAyC7D,UAAUwD,OAA/D;AACAlG,UAAEsD,IAAF,CAAO;AACHC,iBAAI,8CADD;AAEHC,kBAAK,MAFF;AAGHC,sBAAS,MAHN;AAIHC,kBAAK,EAAC,SAAQhB,UAAU6D,MAAnB,EAA0B,SAAQ7D,UAAUwD,OAA5C,EAAoD,SAAQ,MAA5D,EAJF;AAKHtC,qBAAQ,iBAASC,MAAT,EAAgB;AACpB,oBAAGA,UAAQA,OAAOC,CAAf,IAAkBD,OAAOC,CAAP,CAASC,CAAT,KAAa,IAAlC,EAAuC;AAAC;AACpC,wBAAIC,IAAEH,OAAOG,CAAb;AACA,wBAAGA,EAAEC,IAAF,KAAS,KAAZ,EAAkB;AACd2C;AACAvG,gCAAQT,GAAR,CAAY,gBAAZ;AACA0F,8BAAM,gBAAN;AACH,qBAJD,MAIK;AACDjF,gCAAQT,GAAR,CAAYyF,GAAZ;AACAC,8BAAMD,GAAN;AACH;AACJ,iBAVD,MAUK;AACDhF,4BAAQT,GAAR,CAAY,kBAAZ;AACA0F,0BAAM,kBAAN;AACH;AAEJ,aArBE;AAsBHE,mBAAM,eAASC,GAAT,EAAaC,UAAb,EAAwB;AAC1BrF,wBAAQT,GAAR,CAAY,yBAAuB6F,IAAIE,UAA3B,GAAsC,cAAtC,GAAqDD,UAAjE;AACAJ,sBAAM,kBAAN;AACH;AAzBE,SAAP;AA2BH;;AAKD,aAASC,QAAT,CAAkBsB,MAAlB,EAA0B;;AAEtB,YAAI,CAACA,MAAL,EAAa;AACT/G,oBAAQQ,YAAR;AACH,SAFD,MAEO;AACHR,oBAAQQ,YAAR,CAAqB,KAArB;AAEH;;AAED,YAAIuG,MAAJ,EAAY;AACR,gBAAI7G,EAAE,UAAF,EAAc2B,MAAd,IAAwB,CAA5B,EAA+B;AAC3B,oBAAImF,UAAU9G,EAAE,+IAAF,CAAd,CAD2B,CAC8I;AACzKA,kBAAE,MAAF,EAAU+G,MAAV,CAAiBD,OAAjB;AACA,oBAAIE,SAAShH,EAAEA,EAAE,4qCAAF,CAAF,CAAb;AACAA,kBAAE,UAAF,EAAc+G,MAAd,CAAqBC,MAArB;AACAhH,kBAAE,aAAF,EAAiBiH,KAAjB,CAAuBN,UAAvB;AACA3G,kBAAE,iBAAF,EAAqBiH,KAArB,CAA2BC,oBAA3B;AACH,aAPD,MAOO;AACHlH,kBAAE,UAAF,EAAcmH,IAAd;AACH;AACJ,SAXD,MAWO;AACH,gBAAInH,EAAE,UAAF,EAAc2B,MAAd,IAAwB,CAA5B,EAA+B;AAC3B3B,kBAAE,UAAF,EAAcoH,IAAd;AACH;AACJ;AACJ;;AAED,aAASF,oBAAT,GAAgC;AAC5B7G,gBAAQT,GAAR,CAAY,sBAAZ;;AAEA,YAAI,CAAC,UAAUyH,IAAV,CAAerH,EAAE,WAAF,EAAeyB,GAAf,EAAf,CAAL,EAA2C;AACvC6D,kBAAM,aAAN;AACA;AACH;;AAEDC,iBAAS,KAAT;;AAEAvF,UAAE,aAAF,EAAiByB,GAAjB,CAAqBzB,EAAE,WAAF,EAAeyB,GAAf,EAArB;;AAEAkB;AACA;AACH;;AAED2E,WAAOC,SAAP,GAAmB,EAAnB;AACA,aAASX,OAAT,GAAmB;AACfvG,gBAAQT,GAAR,CAAY,UAAU0H,OAAOC,SAA7B;AACA,YAAIC,MAAMxH,EAAE,aAAF,EAAiB,CAAjB,CAAV;AACA,YAAIsH,OAAOC,SAAP,IAAoB,CAAxB,EAA2B;AACvBC,gBAAIC,eAAJ,CAAoB,UAApB;AACAzH,cAAE,aAAF,EAAiBiB,IAAjB,CAAsB,OAAtB;AACAqG,mBAAOC,SAAP,GAAmB,EAAnB;AACA;AACH,SALD,MAKO;AACHD,mBAAOI,MAAP,GAAgB1H,EAAE,WAAF,EAAeyB,GAAf,EAAhB;AACA+F,gBAAIG,YAAJ,CAAiB,UAAjB,EAA6B,IAA7B;AACA3H,cAAE,aAAF,EAAiBiB,IAAjB,CAAsB,UAAUqG,OAAOC,SAAjB,GAA6B,GAAnD;AACAD,mBAAOC,SAAP;AACH;AACDrC,mBAAW,YAAY;AACf0B;AACH,SAFL,EAGM,IAHN;AAIH;;AAED,aAASH,MAAT,GAAkB;AACdzG,UAAEsD,IAAF,CAAO;AACHC,iBAAI,8CADD;AAEHC,kBAAK,KAFF;AAGHC,sBAAS,MAHN;AAIHE,wBAAW,sBAAU,CACpB,CALE;AAMHC,qBAAQ,iBAASC,MAAT,EAAgB;AACpB,oBAAGA,UAAQA,OAAOC,CAAf,IAAkBD,OAAOC,CAAP,CAASC,CAAT,KAAa,IAAlC,EAAuC;AAAC;AACpC,4BAAOF,OAAOG,CAAP,CAASC,IAAhB;AACI,6BAAK,KAAL;AACIsB,qCAAS,IAAT;AACA;AACJ,6BAAK,KAAL,CAJJ,CAIe;AACX;AAAQ;AACJ,gCAAGqC,QAAQ/D,OAAOG,CAAP,CAASqB,GAAjB,CAAH,EAA0B;AACtBxD,sCAAM,EAAN;AACH,6BAFD,MAEO;AACHA,sCAAM,EAAN;AACH;AAC7B;AAXoB;AAaH,iBAdD,MAcM,IAAGgC,UAAQA,OAAOC,CAAf,IAAkBD,OAAOC,CAAP,CAAS+D,CAA3B,IAA8BhE,OAAOC,CAAP,CAAS+D,CAAT,IAAY,KAA7C,EAAmD;AACrD,wBAAGD,QAAQ/D,OAAOC,CAAP,CAASgE,CAAjB,CAAH,EAAwB;AACpBjG,8BAAM,EAAN;AACH,qBAFD,MAEO;AACHA,8BAAM,EAAN;AACH;AACrB;AACiB,iBAPK,MAOD;AACD,wBAAG+F,QAAQ,gBAAR,CAAH,EAA8B;AAC1B/F,8BAAM,EAAN;AACH,qBAFD,MAEO;AACHA,8BAAM,EAAN;AACH;AACrB;AACiB;AACJ,aApCE;AAqCH2D,mBAAM,eAASC,GAAT,EAAaC,UAAb,EAAwB;AAC1BrF,wBAAQT,GAAR,CAAY,yBAAuB6F,IAAIE,UAA3B,GAAsC,cAAtC,GAAqDD,UAAjE;AACA,oBAAGkC,QAAQ,gBAAR,CAAH,EAA8B;AAC1B/F,0BAAM,EAAN;AACH,iBAFD,MAEO;AACHA,0BAAM,EAAN;AACH;AACjB;AACa,aA7CE;AA8CH+D,sBAAS,oBAAU,CAClB;AA/CE,SAAP;AAiDH;AAEJ,CAhjBD","file":"../telecom_gd.js","sourcesContent":["log(\"****************Debug model *******************\")\ndSpider(\"telecom_gd\", function(session,env,$){\n    log(\"current page: \"+location.href)\n\n\n    if(location.href.indexOf(\"gd.189.cn/TS/login.htm\") != -1) {\n        session.setStartUrl();\n//        session.showProgress(false);\n        return;\n    } else if(location.href.indexOf(\"SSOLoginForCommNoPage\") != -1) {\n        console.log(\"SSOLoginForCommNoPage\");\n        return;\n    } else if(location.href.indexOf(\"http://gd.189.cn/TS/index.htm\") != -1 || location.href.indexOf(\"gd.189.cn/TS/?SESSIONID=\") != -1) {\n\n        session.showProgress();\n        session.setProgressMax(100);\n        session.autoLoadImg(false);\n        session.setProgress(0);\n        var thxd = session.get(\"thxd\")\n        if(!thxd) {\n            thxd = {};\n        }\n        var userInfo = thxd[\"user_info\"];\n        if(!userInfo) {\n            userInfo = {};\n        }\n        if(!userInfo[\"name\"]) {\n            var timeout = 10000;\n            var t = setInterval(function () {\n                timeout -= 10;\n                var ob = $(\"#user_name\")\n                if (ob[0] && ob.text() != \"--\") {\n                    session.setProgress(10);\n                    clearInterval(t)\n                    userInfo[\"name\"] = ob.text();\n                    console.log(JSON.stringify(userInfo));\n                    thxd[\"user_info\"] = userInfo;\n                    session.set(\"thxd\", thxd);\n                    location.href = \"http://gd.189.cn/transaction/taocanapply1.jsp?operCode=ChangeCustInfoNew\";\n                } else if (timeout == 0) {\n                    session.setProgress(10);\n                    clearInterval(t);\n                    location.href = \"http://gd.189.cn/transaction/taocanapply1.jsp?operCode=ChangeCustInfoNew\";\n                }\n            }, 10);\n        } else {\n            session.setProgress(10);\n            location.href = \"http://gd.189.cn/transaction/taocanapply1.jsp?operCode=ChangeCustInfoNew\";\n        }\n    } else if (location.href.indexOf(\"gd.189.cn/OperationInitAction2.do?OperCode=ChangeCustInfoNew\") != -1) {\n\n        waitDomAvailable(\"#cust_name_id\", function(dom,timeSpan) {\n            session.setProgress(20);\n            log(\"wait cust_name_id success\");\n            var thxd = session.get(\"thxd\")\n            if(!thxd) {\n                thxd = {};\n            }\n            var userInfo = thxd[\"user_info\"];\n            if(!userInfo) {\n                userInfo = {};\n            }\n            if(!userInfo[\"name\"]) {\n                userInfo[\"name\"]=$(\"#cust_name_id\").val();\n            }\n\n            userInfo[\"idcard_no\"]=$(\"#id_num_id\").val();\n            userInfo[\"contactNum\"]=$(\"#moblie_id\").val();\n            var address = $(\"#post_addr_id\").val();\n            if(address.length == 0) {\n                address = $(\"#id_addr_id\").val();\n            }\n            userInfo[\"household_address\"] = address;\n\n            thxd[\"user_info\"] = userInfo;\n            session.set(\"thxd\", thxd);\n\n            location.href = \"http://gd.189.cn/TS/cx/puk_chaxun.htm?cssid=wdwt-xgcx-puk_pincx\";\n            console.log(JSON.stringify(userInfo));\n        },function() {\n            session.setProgress(20);\n            log(\"wait cust_name_id fail\");\n            location.href = \"http://gd.189.cn/TS/cx/puk_chaxun.htm?cssid=wdwt-xgcx-puk_pincx\";\n        });\n\n\n    } else if (location.href.indexOf(\"gd.189.cn/TS/cx/puk_chaxun.htm?cssid=wdwt-xgcx-puk_pincx\") != -1) {\n\n        waitDomAvailable(\"#phone\", function(dom,timeSpan) {\n            session.setProgress(30);\n            log(\"wait custName success\");\n            var thxd = session.get(\"thxd\")\n            if(!thxd) {\n                thxd = {};\n            }\n            var userInfo = thxd[\"user_info\"];\n            if(!userInfo) {\n                userInfo = {};\n            }\n\n            userInfo[\"mobile\"]=$(\"#phone\").text();\n\n            thxd[\"user_info\"] = userInfo;\n            session.set(\"thxd\", thxd);\n            console.log(JSON.stringify(userInfo));\n//                location.href=\"http://gd.189.cn/TS/wode-wangting-sec.htm?cssid=sy-dh-top-wdwt\";\n            location.href=\"http://gd.189.cn/TS/cx/xiangdan_chaxun.htm?cssid=sy-kscx-xdcx\";\n        },function() {\n            session.setProgress(30);\n            log(\"wait phone fail\");\n            location.href=\"http://gd.189.cn/TS/cx/xiangdan_chaxun.htm?cssid=sy-kscx-xdcx\";\n        });\n\n    } else if (location.href.indexOf(\"gd.189.cn/TS/cx/xiangdan_chaxun.htm?cssid=sy-kscx-xdcx\") != -1) {\n        waitDomAvailable(\".get_sms_code\", function(dom,timeSpan) {\n            session.setProgress(40);\n            getLoginUserType(function () {\n                // showMask(true);\n            })\n        },function() {\n            log(\"wait get_sms_code fail\");\n            setXd([]);\n        });\n\n    }\n\n\n    var months = [];\n    var curMonthIndex = 0;\n    var phoneIndex = -1;\n    var dateIndex = -1;\n    var durationIndex = -1;\n    var feeIndex = -1;\n    var callTypeIndex = -1;\n    var locationIndex = -1;\n    var commuTypeIndex = -1;\n\n\n    var details=[];\n    var datas=[];\n    var param={};\n\n    var loginUser={};\n\n    function loadXd() {\n\n        $.each($(\".rq_list\").find(\"li\"), function () {\n            var month = {};\n            month[\"month\"] = $(this).attr(\"data-month\");\n            month[\"start\"] = $(this).attr(\"data-start\");\n            month[\"end\"] = $(this).attr(\"data-end\");\n            months.push(month);\n        });\n        console.log(JSON.stringify(months));\n        curMonthIndex = 0;\n\n        param={\"d.d01\":\"\",\"d.d02\":\"\",\"d.d03\":\"\",\"d.d04\":\"\",\"d.d05\":\"20\",\"d.d06\":\"1\",\"d.d07\":\"\",\"d.d08\":\"1\"};\n        param[\"d.d06\"]=1;\n        param[\"d.d01\"]=\"call\";\n        // param[\"d.d02\"]=$(\".rq_list_on\").attr(\"data-month\");\n        // param[\"d.d03\"]=$(\".rq_list_on\").attr(\"data-start\");\n        // param[\"d.d04\"]=$(\".rq_list_on\").attr(\"data-end\");\n        param[\"d.d02\"]=months[curMonthIndex].month;\n        param[\"d.d03\"]=months[curMonthIndex].start;\n        param[\"d.d04\"]=months[curMonthIndex].end;\n        var SearchVerifyCode=$(\"#input_code\").val().trim();\n        param[\"d.d07\"]=SearchVerifyCode;\n\n\n        loadXdByMonth();\n    }\n\n    function loadXdByMonth() {\n        $.ajax({\n            url:\"/J/J10009.j?a.c=0&a.u=user&a.p=pass&a.s=ECSS\",\n            type:'get',\n            dataType:\"json\",\n            data:param,\n            beforeSend:function(){\n                console.log(\"beforeSend\");\n                console.log(param);\n            },\n            success:function(result){\n                console.log(param);\n                console.log(result);\n                if(result&&result.b&&result.b.c===\"00\"){//查询成功\n                    switch(result.r.code){\n                        case \"000\":\n                        case \"009\":\n                            result=result.r||result;\n                            var current_page=result.r06;\n                            var total_page=result.r05;\n                            current_page==1&&$.each(result.r02,function(i){\n                                if(this.indexOf(\"通话类型\") != -1) {\n                                    commuTypeIndex = i;\n                                } else if(this.indexOf(\"号码\") != -1) {\n                                    phoneIndex = i;\n                                } else if(this.indexOf(\"日期\") != -1) {\n                                    dateIndex = i;\n                                } else if(this.indexOf(\"时长\") != -1) {\n                                    durationIndex = i;\n                                } else if(this.indexOf(\"费用\") != -1) {\n                                    feeIndex = i;\n                                } else if(this.indexOf(\"呼叫类型\") != -1) {\n                                    callTypeIndex = i;\n                                } else if(this.indexOf(\"通话地\") != -1) {\n                                    locationIndex = i;\n                                }\n                            });\n                            $.each(result.r03,function(){\n                                var data = {}\n                                $.each(this, function (i) {\n                                    var s = this + \"\";\n                                    if (i == commuTypeIndex) {\n                                        data[\"remoteType\"] = s;\n                                    } else if (i == phoneIndex) {\n                                        data[\"otherNo\"] = s;\n                                    } else if (i == dateIndex) {\n                                        data[\"callBeginTime\"] = s;\n                                    } else if (i == durationIndex) {\n                                        data[\"callTime\"] = s;\n                                    } else if (i == feeIndex) {\n                                        data[\"callFee\"] = s;\n                                    } else if (i == callTypeIndex) {\n                                        data[\"callType\"] = s;\n                                    } else if (i == locationIndex) {\n                                        data[\"callAddress\"] = s;\n                                    }\n                                });\n                                datas.push(data);\n                            });\n\n                            if(total_page>current_page) {\n                                param[\"d.d06\"]=parseInt(param[\"d.d06\"])+1;\n                                session.setProgress(45+(55/months.length)*(curMonthIndex+current_page/total_page));\n                                loadXdByMonth();\n                            } else {\n                                console.log(\"load success:\" + months[curMonthIndex].month);\n                                var detail = {};\n                                detail[\"calldate\"] = months[curMonthIndex].month;\n                                detail[\"cid\"] = parseInt(new Date().getTime()/1000).toString();\n                                detail[\"data\"] = datas;\n                                detail[\"status\"] = 4;\n                                details.push(detail);\n                                // console.log(JSON.stringify(datas)||'<tr><td class=\"empty\">'+(result.msg||\"暂无数据\")+'</td></tr>');\n                                datas = [];\n                                if(curMonthIndex < months.length-1) {\n                                    session.setProgress(45+55*(curMonthIndex+1)/months.length);\n                                    curMonthIndex++;\n                                    param[\"d.d02\"]=months[curMonthIndex].month;\n                                    param[\"d.d03\"]=months[curMonthIndex].start;\n                                    param[\"d.d04\"]=months[curMonthIndex].end;\n                                    param[\"d.d06\"]=1;\n                                    console.log(\"curMonthIndex:\" + curMonthIndex + \"|\" + months[curMonthIndex].month);\n                                    loadXdByMonth();\n                                } else {\n                                    console.log(\"details\");\n                                    console.log(JSON.stringify(details));\n                                    setXd(details);\n                                }\n                            }\n                            break;\n                        case \"001\"://未登录\n                            sessionStorage.setItem(\"gd_TS_login_url\",location.pathname);\n                            setTimeout(function(){\n                                location.href=\"https://gd.189.cn/TS/login.htm?redir=\"+encodeURIComponent(location.pathname+location.search)\n                            },1500);\n                        default://其它\n                            console.log(result.r.msg);\n                            if(result.r.msg.indexOf(\"验证码\") != -1) {\n                                alert(result.r.msg);\n                                showMask(true);\n                            } else {\n//                                alert(result.r.msg);\n//                                location.href=\"https://gd.189.cn/TS/login.htm?redir=\"+encodeURIComponent(location.pathname+location.search);\n                                setXd([]);\n                            }\n                    }\n                }else{\n                    alert(\"清单查询初始化，请重试！\");\n                    console.log(\"load fail:\" + months[curMonthIndex].month);\n                    var detail = {};\n                    detail[\"calldate\"] = months[curMonthIndex].month;\n                    detail[\"cid\"] = parseInt(new Date().getTime()/1000).toString();\n                    detail[\"data\"] = datas;\n                    if(datas.length > 0) {\n                        detail[\"status\"] = 5;\n                    } else {\n                        detail[\"status\"] = 2;\n                    }\n                    details.push(detail);\n                    // console.log(JSON.stringify(datas)||'<tr><td class=\"empty\">'+(result.msg||\"暂无数据\")+'</td></tr>');\n                    datas = [];\n                    if(curMonthIndex < months.length-1) {\n                        session.setProgress(45+55*(curMonthIndex+1)/months.length);\n                        curMonthIndex++;\n                        param[\"d.d02\"]=months[curMonthIndex].month;\n                        param[\"d.d03\"]=months[curMonthIndex].start;\n                        param[\"d.d04\"]=months[curMonthIndex].end;\n                        param[\"d.d06\"]=1;\n                        console.log(\"curMonthIndex:\" + curMonthIndex + \"|\" + months[curMonthIndex].month);\n                        loadXdByMonth();\n                    } else {\n                        console.log(\"details\");\n                        console.log(JSON.stringify(details));\n                        setXd(details);\n                    }\n                }\n            },\n            error:function(err,textStatus){\n                console.log(\"ajax请求失败!readyState:\"+err.readyState+\",textStatus:\"+textStatus);\n                alert(\"清单查询初始化，请重试！\");\n\n                console.log(\"load error:\" + months[curMonthIndex].month);\n                var detail = {};\n                detail[\"calldate\"] = months[curMonthIndex].month;\n                detail[\"cid\"] = parseInt(new Date().getTime()/1000).toString();\n                detail[\"data\"] = datas;\n                if(datas.length > 0) {\n                    detail[\"status\"] = 5;\n                } else {\n                    detail[\"status\"] = 2;\n                }\n                details.push(detail);\n                // console.log(JSON.stringify(datas)||'<tr><td class=\"empty\">'+(result.msg||\"暂无数据\")+'</td></tr>');\n                datas = [];\n                if(curMonthIndex < months.length-1) {\n                    session.setProgress(45+55*(curMonthIndex+1)/months.length);\n                    curMonthIndex++;\n                    param[\"d.d02\"]=months[curMonthIndex].month;\n                    param[\"d.d03\"]=months[curMonthIndex].start;\n                    param[\"d.d04\"]=months[curMonthIndex].end;\n                    param[\"d.d06\"]=1;\n                    console.log(\"curMonthIndex:\" + curMonthIndex + \"|\" + months[curMonthIndex].month);\n                    loadXdByMonth();\n                } else {\n                    console.log(\"details\");\n                    console.log(JSON.stringify(details));\n                    setXd(details);\n                }\n            },\n            complete:function(){\n                console.log(\"complete\");\n            }\n        });\n    }\n\n    function setXd(xd) {\n        var thxd = session.get(\"thxd\")\n        if(!thxd) {\n            thxd = {};\n        }\n        thxd[\"month_status\"] = xd;\n        session.set(\"thxd\", thxd);\n\n        session.setProgress(100);\n\n        log(\"爬取完毕----------\" + JSON.stringify(thxd));\n        session.upload(JSON.stringify(thxd));\n        session.finish();\n    }\n\n\n    function getLoginUserType(callback){\n        $.ajax({\n            url:\"/J/J10036.j?a.c=0&a.u=user&a.p=pass&a.s=ECSS\",\n            type:'get',\n            dataType:\"json\",\n            data:{},\n            beforeSend:function(){\n            },\n            success:function(result){\n                if(result&&result.b&&result.b.c===\"00\"){//查询成功\n                    switch(result.r.code){\n                        case \"000\":\n                            var r=result.r,_numStr;\n                            loginUser.account= r.r03||r.r02;//当前号码\n                            loginUser.currNumBusiType = r.r05||r.r04;//当前号码业务类型\n                            loginUser.payType = r.r07;//付费类型\n                            loginUser.latnId= r.r14;//区号\n                            session.setProgress(45);\n                            // callback();\n                            console.log(JSON.stringify(loginUser));\n                            // getSmsCode(loginUser.latnId,loginUser.account);\n//                            showMask(true);\n                            xdInit();\n                            break;\n                        case \"001\"://未登录\n                        default://其它\n                            setXd([]);\n                            showErr(result.r.msg);\n                    }\n                }else{\n                    setXd([]);\n                    console.log(\"详单查询初始化失败，请重试！\");\n                }\n            },\n            error:function(err,textStatus){\n                setXd([]);\n                console.log(\"ajax请求失败!readyState:\"+err.readyState+\",textStatus:\"+textStatus);\n            },\n            complete:function(){\n            }\n        });\n    }\n\n    /**\n     * 获得短信验证码\n     * @param lantId\n     * @param phone\n     */\n    function getSmsCode(){\n        console.log(\"getSmsCode:\" + loginUser.latnId + \"|\" + loginUser.account);\n        $.ajax({\n            url:\"/J/J20009.j?a.c=0&a.u=user&a.p=pass&a.s=ECSS\",\n            type:'post',\n            dataType:\"json\",\n            data:{\"d.d01\":loginUser.latnId,\"d.d02\":loginUser.account,\"d.d03\":\"CDMA\"},\n            success:function(result){\n                if(result&&result.b&&result.b.c===\"00\"){//查询成功\n                    var r=result.r;\n                    if(r.code===\"000\"){\n                        settime();\n                        console.log(\"短信验证码已经发送，请查收！\");\n                        alert(\"短信验证码已经发送，请查收！\");\n                    }else{\n                        console.log(msg);\n                        alert(msg);\n                    }\n                }else{\n                    console.log(\"短信验证码已经发送失败，请重试！\");\n                    alert(\"短信验证码已经发送失败，请重试！\");\n                }\n\n            },\n            error:function(err,textStatus){\n                console.log(\"ajax请求失败!readyState:\"+err.readyState+\",textStatus:\"+textStatus);\n                alert(\"短信验证码已经发送失败，请重试！\");\n            }\n        });\n    }\n\n\n\n\n    function showMask(isShow) {\n\n        if (!isShow) {\n            session.showProgress();\n        } else {\n            session.showProgress(false);\n\n        }\n\n        if (isShow) {\n            if ($('#maskDiv').length == 0) {\n                var maskDiv = $('<div id=\"maskDiv\" style=\"opacity: 1;position: absolute;top: 0;left: 0;background-color: white;width: 100%;height: 100%;z-index: 10000\"></div>');        //创建一个父div\n                $(\"body\").append(maskDiv);\n                var button = $($('<li class=\"input-row\" style=\"display:-webkit-box;display: -webkit-flex\"><span class=\"lf\" style=\"display: block;width: 90px;height: 50px;line-height: 50px;margin-left: 15px;text-align: left;color: #3c3c3c;font-size: 18px\">验证码</span><div style=\"-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;display: -webkit-box;display: -webkit-flex;height: 50px\"><p style=\"-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;display: -webkit-box;display: -webkit-flex;height: 50px;\"><input id=\"inputSms\" style=\"width: 100%;height: 50px;border: none;font-size: 18px\" placeholder=\"验证码\"></p><span id=\"sendSmsBtn\" style=\"display: block;width: 100px;height: 30px;line-height: 30px;background: #fe6246;color:white;font-size: 14px;margin-top: 10px;margin-right: 15px;text-align: center;border-radius: 6px\">发送验证码</span></div></li><li style=\"display:-webkit-box;display: -webkit-flex;margin-top: 20px;margin-left: 15px;margin-right: 15px\"><div style=\"-webkit-box-flex: 1;-webkit-flex: 1;flex: 1;display: -webkit-box;display: -webkit-flex;height: 50px\"><span id=\"certificateBtn\" style=\"width:100%;height:50px;line-height:50px;background:#fe6246;font-size:20px;color:white;text-align: center;border-radius: 6px\">确定</span></div></li>'));\n                $(\"#maskDiv\").append(button);\n                $('#sendSmsBtn').click(getSmsCode);\n                $('#certificateBtn').click(certificateBtnAction);\n            } else {\n                $('#maskDiv').show();\n            }\n        } else {\n            if ($('#maskDiv').length != 0) {\n                $('#maskDiv').hide();\n            }\n        }\n    }\n\n    function certificateBtnAction() {\n        console.log('certificateBtnAction');\n\n        if (!/^\\d{6}$/.test($('#inputSms').val())) {\n            alert('请输入6位短信验证码！');\n            return;\n        }\n\n        showMask(false);\n\n        $(\"#input_code\").val($('#inputSms').val());\n\n        loadXd();\n        // verify_second_sms($('#inputSms').val());\n    }\n\n    window.countdown = 60;\n    function settime() {\n        console.log(\"time:\" + window.countdown);\n        var obj = $('#sendSmsBtn')[0];\n        if (window.countdown == 0) {\n            obj.removeAttribute(\"disabled\");\n            $('#sendSmsBtn').text(\"发送验证码\");\n            window.countdown = 60;\n            return;\n        } else {\n            window.xd_pwd = $('#inputPwd').val();\n            obj.setAttribute(\"disabled\", true);\n            $('#sendSmsBtn').text(\"重新发送(\" + window.countdown + \")\");\n            window.countdown--;\n        }\n        setTimeout(function () {\n                settime()\n            }\n            , 1000);\n    }\n\n    function xdInit() {\n        $.ajax({\n            url:\"/J/J10008.j?a.c=0&a.u=user&a.p=pass&a.s=ECSS\",\n            type:'get',\n            dataType:\"json\",\n            beforeSend:function(){\n            },\n            success:function(result){\n                if(result&&result.b&&result.b.c===\"00\"){//查询成功\n                    switch(result.r.code){\n                        case \"000\":\n                            showMask(true);\n                            break;\n                        case \"001\"://未登录\n                        default://其它\n                            if(confirm(result.r.msg)) {\n                                setXd([]);\n                            } else {\n                                setXd([]);\n                            }\n//                            location.href=\"https://gd.189.cn/TS/login.htm?\";\n                    }\n                }else if(result&&result.b&&result.b.v&&result.b.v==\"999\"){\n                    if(confirm(result.b.m)) {\n                        setXd([]);\n                    } else {\n                        setXd([]);\n                    }\n//                    location.href=\"https://gd.189.cn/TS/login.htm?\";\n                }else{\n                    if(confirm(\"详单查询初始化失败，请重试！\")) {\n                        setXd([]);\n                    } else {\n                        setXd([]);\n                    }\n//                    location.href=\"https://gd.189.cn/TS/login.htm?\";\n                }\n            },\n            error:function(err,textStatus){\n                console.log(\"ajax请求失败!readyState:\"+err.readyState+\",textStatus:\"+textStatus);\n                if(confirm(\"详单查询初始化失败，请重试！\")) {\n                    setXd([]);\n                } else {\n                    setXd([]);\n                }\n//                location.href=\"https://gd.189.cn/TS/login.htm?\";\n            },\n            complete:function(){\n            }\n        });\n    }\n\n})"]}