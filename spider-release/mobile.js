!function t(e,i,n){function o(d,r){if(!i[d]){if(!e[d]){var a="function"==typeof require&&require;if(!r&&a)return a(d,!0);if(s)return s(d,!0);throw new Error("Cannot find module '"+d+"'")}var l=i[d]={exports:{}};e[d][0].call(l.exports,function(t){var i=e[d][1][t];return o(i?i:t)},l,l.exports,t,e,i,n)}return i[d].exports}for(var s="function"==typeof require&&require,d=0;d<n.length;d++)o(n[d]);return o}({1:[function(t,e,i){"use strict";dSpider("mobile",function(t,e,i){function n(){var e=t.get("xd_phone");if(window.xd_phone=e,window.xd_phone)return t.autoLoadImg(!1),void o();var n="login.10086.cn",s="channelID";window.location.href.indexOf(n)>=0&&window.location.href.indexOf(s)>=0&&(i("#getSMSpwd").length&&i("#getSMSpwd").click(function(){t.set("firstSMSTime",(new Date).getTime()+"")}),i("#getPhoneSMSpwd").length&&i("#getPhoneSMSpwd").click(function(){t.set("firstSMSTime",(new Date).getTime()+"")}),i("#submit_bt").click(function(){"on"==i("#account_nav").attr("class")?t.set("xd_phone",i("#p_phone_account").val()):t.set("xd_phone",i("#p_phone").val()),""==i("#p_sms").val()&&t.set("firstSMSTime","0")}))}function o(){if(window.xd_phone){var e="shop.10086.cn/i/?f=billdetailqry&welcome=";if(window.location.href.indexOf(e)>=0){window.xd_phone;t.showProgress(),t.setProgressMax(7),window.xd_progressMax=1,t.setProgress(window.xd_progressMax),window.xd_data=new Object,window.xd_month_progress_count=0,setTimeout(function(){s()},5e3)}}}function s(){return i(".all-site-loading div").is(":visible")?void location.reload():void w()}function d(e){var n="http://shop.10086.cn/i/v1/cust/info/"+e+"?time="+(new Date).getTime();i.get(n,function(e){var i=e.data,n={mobile:window.xd_phone,name:i.name,household_address:i.address,contactNum:i.contactNum,registration_time:i.inNetDate};window.xd_data.user_info=n,window.xd_progressMax++,t.setProgress(window.xd_progressMax),window.xd_month_progress_count++,p()})}function r(){d(window.xd_phone),a()}function a(){i("#switch-data li").eq(1).click(),i("#month-data li").eq(0).click(),setTimeout(function(){"active"==i("#switch-data li").eq(1).attr("class")?l(0,1):a()},3e3)}function l(e,n){var o=function(t){var e=t;return e=e.replace("年",""),e=e.replace("月","")}(i("#month-data li").eq(e).text());if(i("#tbody").is(":visible")){log("有详单记录");var s=new Object;s.month=o,s.value=c();var d=i("#notes2").text();s.total=d.substring(1,d.length-1),u(s);var r=i("#notes1").text().substring(1,i("#notes1").text().length-1),a=r.substring(0,r.indexOf("/")),w=r.substring(r.indexOf("/")+1);if(a==w){if(log("当前是最后一页"),window.xd_progressMax++,t.setProgress(window.xd_progressMax),e++,e>5)return window.xd_month_progress_count++,void p();i("#month-data li").eq(e).click(),setTimeout(function(){l(e,n)},3e3)}else{var f=parseInt(a);f++,window.jQuery(".gs-page").eq(f-1).click(),setTimeout(function(){l(e,f)},4e3)}}else{if(i("tbody.err tr td:eq(0) div:eq(0) div:eq(1) div:eq(0)").is(":visible")){log("选择时间段没有详单记录");var s=new Object;return s.month=o,s.value=new Array,s.total=0,u(s),window.xd_progressMax=window.xd_progressMax+e+1,t.setProgress(window.xd_progressMax),e++,e>5?(window.xd_month_progress_count++,void p()):(i("#month-data li").eq(e).click(),void setTimeout(function(){l(e,n)},3e3))}i("a.gs-search").is(":visible")?window.jQuery(".gs-page").eq(n-1).click():i("#month-data li").eq(e).click(),setTimeout(function(){l(e,n)},6e3)}}function c(){for(var t=new Array,e=i("#tbody tr").length,n=0;n<e;n++){var o=new Object;o.callFee=i("#tbody tr").eq(n).find("td").eq(7).text(),o.remoteType=i("#tbody tr").eq(n).find("td").eq(5).text(),o.callType=i("#tbody tr").eq(n).find("td").eq(2).text(),o.callTime=i("#tbody tr").eq(n).find("td").eq(4).text(),o.callAddress=i("#tbody tr").eq(n).find("td").eq(1).text(),o.callBeginTime=i("#tbody tr").eq(n).find("td").eq(0).text(),o.otherNo=i("#tbody tr").eq(n).find("td").eq(3).text(),o.taocan=i("#tbody tr").eq(n).find("td").eq(6).text(),t.push(o)}return t}function p(){2==window.xd_month_progress_count&&(window.xd_data.month_status=window.xd_callBill,t.upload(window.xd_data),t.finish())}function u(t){window.xd_callBill||(window.xd_callBill=new Array);var e=null;if(window.xd_callBill.length>0)for(var i=0;i<window.xd_callBill.length;i++){var n=window.xd_callBill[i];if(n.calldate.indexOf(t.month)>=0){e=n;break}}if(null==e){var o=(new Date).getTime(),s=function(t,e){var i="000000000"+t;return i.substr(i.length-e)}(o,10);e=new Object,e.data=new Array,e.calldate=t.month,e.totalCount=t.total,e.mobile=window.xd_phone,e.cid=s,e.status=4,window.xd_callBill.push(e)}if(t.status&&(e.status=t.status),t.value.length>0)for(var i=0;i<t.value.length;i++){var d=t.value[i];e.data.push(d)}}function w(){i("#month-data li").eq(0).click(),setTimeout(function(){return i("#show_vec_firstdiv").is(":visible")?(f(!0),void i("#sendSmsBtn").click(function(){i("#stc-send-sms").click()})):void w()},6e3)}function f(e){if(e?t.showProgress(!1):t.showProgress(),e)if(0==i("#maskDiv").length){var n=i("<div></div>");n.attr("id","maskDiv"),i("body").append(n),i("#maskDiv").css({opacity:1,position:"absolute",top:0,left:0,"background-color":"#f0f1f3",width:"150%",height:"150%","z-index":214748364});var o=i(i("<p><p/>"));o.text("请输入服务密码："),i("#maskDiv").append(o),o.css({position:"absolute",left:"30px",top:"50px",height:"60px",width:"300px","font-size":"30px"});var s=i('<input type="text" id="inputPwd"/>');i("#maskDiv").append(s);var d=o.offset().left+"px",r=o.offset().top+o.height()+10+"px";i("#inputPwd").css({position:"absolute",left:d,top:r,height:"60px",width:"300px","font-size":"20x","background-color":"white"});var a=i(i("<p><p/>"));a.text("请输入短信验证码："),i("#maskDiv").append(a);var l=i("#inputPwd").offset().top+i("#inputPwd").height()+50+"px";a.css({position:"absolute",left:d,top:l,height:"60px",width:"300px","font-size":"30px"});var c=i('<input type="text" id="inputSms"/>');i("#maskDiv").append(c);var p=a.offset().top+a.height()+10+"px";i("#inputSms").css({position:"absolute",left:d,top:p,height:"60px",width:"180px","font-size":"30px","background-color":"white"});var u=i('<input type="button" id="sendSmsBtn" value="获取短信"/>');u.click(v),i("#maskDiv").append(u),i("#sendSmsBtn").css({position:"absolute",left:i("#inputSms").offset().left+i("#inputSms").width()+25+"px",top:i("#inputSms").offset().top+10+"px",height:"40px",width:"120px","font-size":"20px","background-color":"#5a7bd0"});var w=i(i('<p id="xd_sec_errorMessage"><p/>'));i("#maskDiv").append(w),i("#xd_sec_errorMessage").css({position:"absolute",left:d,top:i("#inputSms").offset().top+i("#inputSms").height()+12+"px",height:"40px",width:"300px","font-size":"20px",color:"red"});var f=i('<input type="button" id="certificateBtn" value="去认证"/>');f.click(x),i("#maskDiv").append(f),i("#certificateBtn").css({position:"absolute",left:d,top:i("#inputSms").offset().top+i("#inputSms").height()+50+"px",height:"60px",width:"300px","font-size":"30px",color:"white","background-color":"#fe6246"})}else i("#maskDiv").show();else 0!=i("#maskDiv").lensgth&&i("#maskDiv").hide()}function x(){return window.xd_pwd=i("#inputPwd").val(),/^\d{6}$/.test(window.xd_pwd)?/^\d{6}$/.test(i("#inputSms").val())?(i("#vec_servpasswd").val(""+window.xd_pwd),i("#vec_smspasswd").val(""+i("#inputSms").val()),i("#vecbtn").click(),i("#certificateBtn").attr({disabled:!0}),void setTimeout(function(){h()},3e3)):void alert("请输入6位短信验证码！"):void alert("请输入6位服务密码！")}function v(){var t=i("#sendSmsBtn")[0];return 0==window.countdown?(t.removeAttribute("disabled"),t.value="获取短信验证码",void(window.countdown=60)):(window.xd_pwd=i("#inputPwd").val(),t.setAttribute("disabled",!0),t.value="重新发送("+window.countdown+")",window.countdown--,void setTimeout(function(){v()},1e3))}function h(){if(window.xd_sec_vertify_dis++,!i("#show_vec_firstdiv").is(":visible")&&i("tbody").length>0)return f(),i("#switch-data li").eq(1).click(),i("#month-data li").eq(0).click(),void setTimeout(function(){window.xd_month_progress_count=0,r()},3e3);if(i("#detailerrmsg").is(":visible")){var t=i("#detailerrmsg").text();i("#xd_sec_errorMessage").text(t),i("#certificateBtn").removeAttr("disabled")}else{if(6==window.xd_sec_vertify_dis)return window.xd_sec_vertify_dis=0,void i("#certificateBtn").removeAttr("disabled");setTimeout(function(){h()},3e3)}}n(),window.countdown=60,window.xd_sec_vertify_dis=0,i("#forget_btn").length&&i("#forget_btn").length>0&&t.setStartUrl()})},{}]},{},[1]);
//# sourceMappingURL=sources_maps/mobile.js.map
