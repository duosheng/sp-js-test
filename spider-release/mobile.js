!function t(e,n,o){function i(s,r){if(!n[s]){if(!e[s]){var d="function"==typeof require&&require;if(!r&&d)return d(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){"use strict";dSpider("mobile",function(e,n,o){function i(){var t=e.get("xd_phone");if(window.xd_phone=t,window.xd_phone)return e.autoLoadImg(!1),void a();var n="login.10086.cn",i="channelID";window.location.href.indexOf(n)>=0&&window.location.href.indexOf(i)>=0&&(o("#getSMSpwd").length&&o("#getSMSpwd").click(function(){e.set("firstSMSTime",(new Date).getTime()+"")}),o("#getPhoneSMSpwd").length&&o("#getPhoneSMSpwd").click(function(){e.set("firstSMSTime",(new Date).getTime()+"")}),o("#submit_bt").click(function(){"on"==o("#account_nav").attr("class")?e.set("xd_phone",o("#p_phone_account").val()):e.set("xd_phone",o("#p_phone").val()),""==o("#p_sms").val()&&e.set("firstSMSTime","0")}))}function a(){if(window.xd_phone){var t="shop.10086.cn/i/?f=billdetailqry&welcome=";if(window.location.href.indexOf(t)>=0){window.xd_phone;e.showProgress(),e.setProgressMax(7),window.xd_progressMax=1,e.setProgress(window.xd_progressMax),window.xd_data=new Object,s()}}}function s(){!function(){t(["/i/service/model/fee_c3dfbd6.js","/i/apps/serviceapps/billdetail/billdetailone_288e057.js","/i/nresource/js/page/pages.js","btncommit","/i/apps/serviceapps/billdetail/billdetailtwo_00c3bc9.js"],function(t,n,o,i,a){var s=new Date,r=s.getMonth()+1,d=s.getFullYear(),w=function(t,e){var n="000000000"+t;return n.substr(n.length-e)}(r,2),p=[window.xd_phone,1,50,""+d+w,"02"];t.getDetailInfo(p,function(t,e,n,o,i){l()},function(t,n,o){"520001"==t||"3018"==t?c():e.finish(n,"二次验证请求发生错误",t)},function(t,n,o){e.finish(n,"二次验证请求发生错误",t)})})}()}function r(){for(var t=new Array,e=new Date,n=0;n<6;n++){var o=e.getMonth()+1,i=e.getFullYear(),a=o-n;a<=0&&(i--,a+=12);var s=function(t,e){var n="000000000"+t;return n.substr(n.length-e)}(a,2);t.push(""+i+s)}return t}function d(t){var n="http://shop.10086.cn/i/v1/cust/info/"+t+"?time="+(new Date).getTime();o.get(n,function(t){var n=t.data,o={mobile:window.xd_phone,name:n.name,household_address:n.address,contactNum:n.contactNum,registration_time:n.inNetDate};window.xd_data.user_info=o,window.xd_progressMax++,e.setProgress(window.xd_progressMax),p()})}function l(){d(window.xd_phone),window.monthArray=r();for(var t=0;t<window.monthArray.length;t++){window.xd_monthDataCount=0;var e=window.monthArray[t];w(e)}}function w(n,o){1==arguments.length&&(o=1),function(){t(["/i/service/model/fee_c3dfbd6.js","/i/apps/serviceapps/billdetail/billdetailone_288e057.js","/i/nresource/js/page/pages.js","btncommit","/i/apps/serviceapps/billdetail/billdetailtwo_00c3bc9.js"],function(t,i,a,s,r){req=[window.xd_phone,o,50,n,"02"],t.getDetailInfo(req,function(t,i,a,s,r){if(0!=i){var d=new Object;d.month=n,d.value=t,d.total=i,u(d),50*o>=i?(window.xd_progressMax++,e.setProgress(window.xd_progressMax),window.xd_monthDataCount++,window.xd_monthDataCount>=6&&p()):(o++,w(n,o))}else{var d=new Object;d.month=n,d.value=new Array,d.total=0,u(d),window.xd_monthDataCount++,window.xd_progressMax++,e.setProgress(window.xd_progressMax),window.xd_monthDataCount>=6&&p()}},function(t,i,a){if("2039"==t){var s=new Object;s.month=n,s.value=new Array,s.total=0,u(s),window.xd_monthDataCount++,window.xd_progressMax++,e.setProgress(window.xd_progressMax),window.xd_monthDataCount>=6&&p()}else if("520001"==t||"3018"==t)c();else{var s=new Object;s.month=n,s.value=new Array,s.total=total,s.state=2,1==o?(window.xd_progressMax++,e.setProgress(window.xd_progressMax),window.xd_monthDataCount++):s.state=5,u(s),window.xd_monthDataCount>=6&&p()}},function(t,i,a){var s=new Object;s.month=n,s.value=new Array,s.total=0,s.state=2,1==o?(window.xd_progressMax++,e.setProgress(window.xd_progressMax),window.xd_monthDataCount++):s.state=5,u(s),window.xd_monthDataCount>=6&&p()})})}()}function p(){window.xd_data.user_info&&window.xd_monthDataCount>=6&&(window.xd_data.month_status=window.xd_callBill,e.upload(window.xd_data),e.finish())}function u(t){window.xd_callBill||(window.xd_callBill=new Array);var e=null;if(window.xd_callBill.length>0)for(var n=0;n<window.xd_callBill.length;n++){var o=window.xd_callBill[n];if(o.calldate.indexOf(t.month)>=0){e=o;break}}if(null==e){var i=(new Date).getTime(),a=function(t,e){var n="000000000"+t;return n.substr(n.length-e)}(i,10);e=new Object,e.data=new Array,e.calldate=t.month,e.totalCount=t.total,e.mobile=window.xd_phone,e.cid=a,e.status=4,window.xd_callBill.push(e)}if(t.status&&(e.status=t.status),t.value.length>0)for(var n=0;n<t.value.length;n++){var s=t.value[n],r=new Object;r.callFee=s.commFee,r.remoteType=s.commType,r.callType=s.commMode,r.callTime=s.commTime,r.callAddress=s.commPlac,r.callBeginTime=s.startTime,r.otherNo=s.anotherNm,r.taocan=s.mealFavorable,e.data.push(r)}}function c(){var t=e.get("firstSMSTime");window.firstSmsTm=parseInt(t),setTimeout(f,1e3)}function f(){window.firstSmsTm+3e4<(new Date).getTime()?(m(!0),o("#sendSmsBtn").click(function(){h()})):setTimeout(f,1e3)}function h(){var e=["https://login.10086.cn",window.xd_phone];!function(e,n,i){t(["stclog"],function(t){new Date;o.ajax({type:"POST",url:e[0]+"/sendSMSpwd.action",async:!1,timeout:10,dataType:"jsonp",jsonpCallback:"result",data:{userName:e[1]},success:function(t){"error"==t.resultCode?alert("发生未知错误，请稍后重试"):window.fffirst?alert("短信已发送!"):(alert("短信已发送, 如果您未收到，请60秒后重试"),window.fffirst=!0)},error:function(t,e,n){alert("发生未知错误，请稍后重试")}})})}(e,null,null)}function x(e){!function(n,o){t(["/i/service/model/fee_c3dfbd6.js","pluspop","btncommit"],function(t,n,o){req=["https://login.10086.cn"],req.push(window.xd_phone),req.push(window.xd_pwd),req.push(e),req.push("01","","12003","01"),t.submitDetailVec(req,function(t){m(!1),l()},function(t,e){alert(e)})})}(window.xd_phone,null)}function m(t){if(t?e.showProgress(!1):e.showProgress(),t)if(0==o("#maskDiv").length){var n=o("<div></div>");n.attr("id","maskDiv"),o("body").append(n),o("#maskDiv").css({opacity:1,position:"absolute",top:0,left:0,"background-color":"#AAAAAA",width:"200%",height:"200%","z-index":1e4});var i=o(o("<p><p/>"));i.text("请输入服务密码："),o("#maskDiv").append(i),i.css({position:"absolute",left:"30px",top:"200px",height:"60px",width:"300px","font-size":"30px"});var a=o('<input type="text" id="inputPwd"/>');o("#maskDiv").append(a);var s=i.offset().left+"px",r=i.offset().top+i.height()+10+"px";o("#inputPwd").css({position:"absolute",left:s,top:r,height:"60px",width:"300px","font-size":"20x","background-color":"yellow"});var d=o(o("<p><p/>"));d.text("请输入短信验证码："),o("#maskDiv").append(d);var l=o("#inputPwd").offset().top+o("#inputPwd").height()+50+"px";d.css({position:"absolute",left:s,top:l,height:"60px",width:"300px","font-size":"30px"});var w=o('<input type="text" id="inputSms"/>');o("#maskDiv").append(w);var p=d.offset().top+d.height()+10+"px";o("#inputSms").css({position:"absolute",left:s,top:p,height:"60px",width:"300px","font-size":"30px","background-color":"yellow"});var u=o('<input type="button" id="sendSmsBtn" value="免费获取验证码"/>').click(g);o("#maskDiv").append(u),o("#sendSmsBtn").css({position:"absolute",left:o("#inputSms").offset().left+o("#inputSms").width()+30+"px",top:o("#inputSms").offset().top+"px",height:"60px",width:"200px","font-size":"30px","background-color":"green"});var c=o('<input type="button" id="certificateBtn" value="去认证"/>').click(v);o("#maskDiv").append(c),o("#certificateBtn").css({position:"absolute",left:s,top:o("#inputSms").offset().top+o("#inputSms").height()+50+"px",height:"60px",width:"300px","font-size":"30px","background-color":"green"})}else o("#maskDiv").show();else 0!=o("#maskDiv").lensgth&&o("#maskDiv").hide()}function v(){return window.xd_pwd=o("#inputPwd").val(),/^\d{6}$/.test(window.xd_pwd)?/^\d{6}$/.test(o("#inputSms").val())?void x(o("#inputSms").val()):void alert("请输入6位短信验证码！"):void alert("请输入6位服务密码！")}function g(){var t=o("#sendSmsBtn")[0];return 0==window.countdown?(t.removeAttribute("disabled"),t.value="免费获取验证码",void(window.countdown=60)):(window.xd_pwd=o("#inputPwd").val(),t.setAttribute("disabled",!0),t.value="重新发送("+window.countdown+")",window.countdown--,void setTimeout(function(){g()},1e3))}i(),window.countdown=60})},{}]},{},[1]);
//# sourceMappingURL=sources_maps/mobile.js.map
