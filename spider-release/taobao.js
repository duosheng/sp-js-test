!function e(t,o,r){function i(n,d){if(!o[n]){if(!t[n]){var s="function"==typeof require&&require;if(!d&&s)return s(n,!0);if(a)return a(n,!0);throw new Error("Cannot find module '"+n+"'")}var l=o[n]={exports:{}};t[n][0].call(l.exports,function(e){var o=t[n][1][e];return i(o?o:e)},l,l.exports,e,t,o,r)}return o[n].exports}for(var a="function"==typeof require&&require,n=0;n<r.length;n++)i(r[n]);return i}({1:[function(e,t,o){"use strict";dSpider("taobao",600,function(e,t,o){function r(){var t=e.get("persionInfo"),o=e.get("AddressData"),r=e.get("orderArray");void 0==t?e.finish("upLoadData方法中的数据为空","persionInfo is undefined",2):void 0==o?e.finish("upLoadData方法中的数据为空","addData is undefined",2):void 0==r&&e.finish("upLoadData方法中的数据为空","orderArray is undefined",2);var i={};i.ec_no="234578535",i.site_id="1",i.base_info=t;var a={};a.contact_detail=o,i.contact_info=a;var n={};n.order_detail=r,i.order_info=n,log("-------上传数据----------"),log(i),e.upload(i),e.finish()}if(e.autoLoadImg(!1),log(location.href),alert=function(){},location.pathname.indexOf("mtb/mtb.htm")!=-1&&(location="https://h5.m.taobao.com/mlapp/mytaobao.html"),location.href.indexOf("intent://")!=-1&&(location="https://h5.m.taobao.com/mlapp/mytaobao.html"),o("div.submit>button").text().indexOf("登 录")!=-1&&e.setStartUrl(),window.location.pathname.indexOf("mlapp/mytaobao")!=-1){var i=e.get("taobaoState");1!=i&&2!=i&&3!=i?(0==i||(e.set("taobaoState",0),e.set("orderArray",[]),e.showProgress(!0),e.setProgressMax(100),e.setProgress(2)),location="https://h5.m.taobao.com/mlapp/olist.html"):1==i?(e.set("AddressData",[]),location.href="//www.taobao.com/index.php?from=wap"):2==i&&(location.href="https://i.taobao.com/user/baseInfoSet.htm")}var a=e.get("taobaoState");if(0==a){var n,d,s,l,m,f,c,h,l,m,f,c,h,d,s,p,u,g,x;!function(){var t=function(){function t(){if(o("div.order-more").length>0)if(o(".order-list>li").length>=5){for(var t=o(".order-list>li").length,a=[],n=0;n<t;n++)a[n]=o(o(".order-list>li")[n]).children().eq(0).attr("class").toString().split(" ")[1].substring(0,16);e.set("orderIdList",a),log("加载完成"),clearInterval(i),e.set("OrderItemPosition",0),r()}else document.getElementsByClassName("order-more")[0].click(),log("正在获取订单");else log("  ::before  is  "+window.getComputedStyle(o("div.order-more")[0],"::before")+" ! order-more length is "+o("div.order-more").length)}log("--------------------------getOrderList方法----------------------------");var i;i=setInterval(t,3e3)},r=function t(){if(log("--------------------------intoOrderDetail----------------------------"),0==o(".order-list>li").length)return void setTimeout(t,100);var r=e.get("OrderItemPosition");if(r>=o(".order-list>li").length)log("--------------------------length----------------------------"+o(".order-list>li").length),e.set("taobaoState",1),e.setProgress(65),location="https://h5.m.taobao.com/mlapp/mytaobao.html";else{var i=function(){o(o(".order-list>li")[r]).children().eq(3).children().eq(0).children().eq(1).trigger("click"),e.setProgress(5+r/o(".order-list>li").length*60),log("--------------------------进入订单----------------------------"+r)};setTimeout(i,500)}};window.location.pathname.indexOf("mlapp/olist")!=-1&&(n=e.get("OrderItemPosition"),void 0==n?t():r()),window.location.pathname.indexOf("mymovie/pages")!=-1&&(d=e.get("orderArray"),void 0==d?(e.set("taobaoState",-1),closeOrderDetail()):(u=d,s=e.get("OrderItemPosition"),e.set("OrderItemPosition",s+1),location="https://h5.m.taobao.com/mlapp/olist.html")),window.location.pathname.indexOf("bx/orderdetail.html")!=-1&&(log("--------------------------爬取保险----------------------------"),l=e.get("orderArray"),void 0==l?(e.set("taobaoState",-1),closeOrderDetail()):!function(){var t=function t(){var r=o("span.textarea");if(0==r.length)return void setTimeout(t,100);var i={};i.name="保险",i.price=o(r[2]).text(),i.number=parseInt(o(r[3]).text()),f.id=o(r[1]).text(),f.time=o(r[5]).text(),f.address="无",f.total=parseInt(o(r[3]).text()),f.products.push(i),c.push(f),l.push(c),e.set("orderArray",l),e.set("OrderItemPosition",m+1),location="https://h5.m.taobao.com/mlapp/olist.html",log("--------------------------爬取保险end----------------------------")};m=e.get("OrderItemPosition"),f={},f.products=[],c=[],h={},setTimeout(t,100)}()),window.location.pathname.indexOf("trip/flight")!=-1&&(log("--------------------------爬取飞机票----------------------------"),l=e.get("orderArray"),void 0==l?(e.set("taobaoState",-1),closeOrderDetail()):!function(){var t=function t(){if(0==o("div.detail-list-item-box").length)return void setTimeout(t,100);var r={};r.name=o(o("span.order-shareflight")[0]).text().trim(),r.price=o("span.money").text().split("￥")[1],r.number="1",f.id=o(o("div h5")[1]).text().split("订单号")[1],f.time=o("span.date").text(),f.address=o("span.city").text().trim(),f.total=o("span.money").text().split("￥")[1],f.products.push(r),c.push(f),l.push(c),e.set("orderArray",l),e.set("OrderItemPosition",m+1),location="https://h5.m.taobao.com/mlapp/olist.html",log("--------------------------爬取飞机票end----------------------------")};m=e.get("OrderItemPosition"),f={},f.products=[],c=[],h={},setTimeout(t,100)}()),window.location.pathname.indexOf("mlapp/olist")==-1&&window.location.pathname.indexOf("mymovie/pages")==-1&&window.location.pathname.indexOf("bx/orderdetail")==-1&&window.location.pathname.indexOf("trip/flight")==-1&&window.location.pathname.indexOf("mlapp/odetail")==-1&&(d=e.get("orderArray"),void 0==d?(e.set("taobaoState",-1),closeOrderDetail()):(u=d,s=e.get("OrderItemPosition"),e.set("OrderItemPosition",s+1),location="https://h5.m.taobao.com/mlapp/olist.html")),window.location.pathname.indexOf("mlapp/odetail")!=-1&&!function(){var t=function t(){var i={},a=[],n=[],d=o(".order-list>li>div");if(0==d.length)return void setTimeout(t,100);log("--------------------------开始爬取订单----------------------------");for(var s=0;s<d.length;s++){if(d[s].className.indexOf("orderinfo")!=-1){for(var l=0;l<d[s].children[0].childElementCount;l++){var m=o(d[s].children[0].children[l]).text();if(m.indexOf("订单编号")!=-1){var f=m.substring(m.indexOf(":")+1,m.length);i.id=f}}for(var l=0;l<d[s].children[0].childElementCount;l++){var m=o(d[s].children[0].children[l]).text();if(m.indexOf("创建时间")!=-1){var c=m.substring(m.indexOf(":")+1,m.length);i.time=c}}}if(d[s].className.indexOf("item")!=-1){for(var h=d[s].children,g=0;g<h.length;g++){var x={};if(h[g].className.indexOf("item-list")!=-1)for(var v=0;v<h[g].children.length;v++){if(h[g].children[v].className.indexOf("item-info")!=-1)for(var b=h[g].children[v],O=0;O<b.children.length;O++){var y=b.children[O];y.className.indexOf("title")!=-1&&(x.name=o(y).text())}if(h[g].children[v].className.indexOf("item-pay")!=-1)for(var w=h[g].children[v],I=0;I<w.children.length;I++){var P=w.children[I];if(P.className.indexOf("item-pay-data")!=-1){for(var Q=P.children,_=0;_<Q.length;_++)if(Q[_].className.indexOf("price")!=-1){var S=o(Q[_]).text();S.indexOf("￥")!=-1&&(S=S.substring(S.indexOf("￥")+1,S.length)),x.price=S;break}for(var _=0;_<Q.length;_++)if(Q[_].className.indexOf("nums")!=-1){var A=o(Q[_]).text();A.indexOf("x")!=-1&&(A=A.substring(A.indexOf("x")+1,A.length)),x.number=A}}}}}n.push(x)}if(d[s].className.indexOf("paydetail")!=-1)for(var Q=d[s].children[0].children,N=0;N<Q.length;N++)for(var D=Q[N].children,q=0;q<D.length;q++)if(o(D[q]).text().indexOf("实付款")!=-1){var T=o(D[q+1]).text();if(T.indexOf("￥")!=-1&&(T=T.substring(T.indexOf("￥")+1,T.length)),i.total=T,i.products=[],n.length>1){for(var U=0;U<n.length;U++){var k={};k.name=n[U].name,k.price=n[U].price,k.number=n[U].number,i.products.push(k)}a.push(i)}else if(1==n.length){var k={};k.name=n[0].name,k.price=n[0].price,k.number=n[0].number,i.products.push(k),a.push(i)}u.push(a),e.set("orderArray",u),e.set("OrderItemPosition",p+1),r()}if(d[s].className.indexOf("address")!=-1)for(var C=d[s].children[0].children,J=0;J<C.length;J++)if(C[J].className.indexOf("cont")!=-1)for(var L=C[J].children,E=0;E<L.length;E++)if(L[E].className.indexOf("submsg")!=-1){var M=o(L[E]).text();M=M.substring(M.indexOf("：")+1,M.length),i.address=M}}log("--------------------------爬取订单end----------------------------")},r=function(){location="https://h5.m.taobao.com/mlapp/olist.html"};e.set("detailUrl",window.location.href),u=[],g=e.get("orderArray"),void 0==g?(e.set("taobaoState",-1),r()):(u=g,x=e.get("OrderItemPosition"),p=x,t())}()}()}else if(1==a){if(window.location.hostname.indexOf("m.taobao.com")!=-1&&(o(".my").click(),location.href="//www.taobao.com/index.php?from=wap"),window.location.hostname.indexOf("www.taobao.com")!=-1&&(location.href="//i.taobao.com/my_taobao.htm"),window.location.href.indexOf("i.taobao.com/my_taobao")!=-1&&dQuery("li.J_MtNavSubTrigger").children()[0].click(),window.location.hostname.indexOf("member1.taobao.com")!=-1)if(window.location.href.indexOf("deliver_address")!=-1)if(window.location.href.indexOf("addrId")!=-1){var v=e.get("AddressData"),b=e.get("addressUrlArray"),O=e.get("addressUrlPosition");void 0==v&&(v=[]);var y={};y.location=dQuery("div.city-title").text(),y.address=dQuery("textarea#J_Street").text(),y.zipcode=dQuery("input#J_PostCode").attr("value"),y.name=dQuery("input#J_Name").attr("value"),y.phone=dQuery("input#J_Mobile").attr("value"),v.push(y),e.set("AddressData",v),e.setProgress(65+(O+1)/b.length*20),O<b.length-1?(e.set("addressUrlPosition",O+1),location.href=b[O+1]):(e.set("taobaoState",2),e.setProgress(85),location.href="https://i.taobao.com/user/baseInfoSet.htm")}else{for(var w=dQuery("tbody>tr>td>a"),I=[],P=0;P<w.length;P++)"修改"==dQuery(w[P]).text()&&I.push(dQuery(w[P]).attr("href"));e.set("addressUrlArray",I),e.set("addressUrlPosition",0),location.href=I[0]}else location.href="https://member1.taobao.com/member/fresh/deliver_address.htm"}else if(2==a){if(window.location.pathname.indexOf("baseInfoSet")!=-1){var Q={};Q.name=dQuery("input#J_realname").attr("value"),e.set("persionInfo",Q),e.setProgress(90),location.href="https://member1.taobao.com/member/fresh/account_security.htm"}if(window.location.pathname.indexOf("account_security")!=-1){var _=e.get("persionInfo");void 0==_&&(_={});for(var S,A,N=dQuery("span.t"),D=0;D<N.length;D++)dQuery(N[D]).text().indexOf("会员名")!=-1&&(A=dQuery(dQuery(N[D]).next()).text().trim()),dQuery(N[D]).text().indexOf("绑 定 手 机")!=-1&&(S=dQuery(dQuery(N[D]).next()).text().trim());_.username=A,_.phone=S,e.set("persionInfo",_),e.setProgress(97),dQuery("div.operate>a")[0].click()}if(window.location.pathname.indexOf("certify_info")!=-1){var _=e.get("persionInfo");void 0==_&&(_={});for(var q,N=dQuery("div.explain-info>span"),T=0;T<N.length;T++){var U=dQuery(N[T]).text();U.indexOf("身份证号")!=-1&&(q=dQuery(dQuery(N[T]).next()).text())}_.idcard_no=q,e.set("persionInfo",_),e.set("taobaoState",3),e.setProgress(100),r()}}})},{}]},{},[1]);
//# sourceMappingURL=sources_maps/taobao.js.map
